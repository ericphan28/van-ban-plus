# ğŸ›ï¸ Há»† THá»NG QUáº¢N LÃ TÃ€I LIá»†U CÆ  QUAN - DMS (Document Management System)

## ğŸ¯ Má»¤C ÄÃCH & Äá»I TÆ¯á»¢NG Sá»¬ Dá»¤NG

**Pháº§n má»m dÃ nh cho:** CÃ¡n bá»™, cÃ´ng chá»©c cáº¥p xÃ£/phÆ°á»ng/thá»‹ tráº¥n á»Ÿ Viá»‡t Nam

**Äáº·c thÃ¹ nghiá»‡p vá»¥:**
- âœ… Quáº£n lÃ½ vÄƒn báº£n Ä‘i/Ä‘áº¿n theo quy Ä‘á»‹nh vÄƒn thÆ° NhÃ  nÆ°á»›c
- âœ… PhÃ¢n loáº¡i theo nguá»“n: Trung Æ°Æ¡ng â†’ Tá»‰nh â†’ Huyá»‡n â†’ XÃ£
- âœ… Quáº£n lÃ½ há»“ sÆ¡ cÃ´ng viá»‡c theo 6 lÄ©nh vá»±c chÃ­nh (Ná»™i vá»¥, TÃ i chÃ­nh, Äáº¥t Ä‘ai, VÄƒn hÃ³a, Kinh táº¿, An ninh)
- âœ… Workflow phÃª duyá»‡t vÄƒn báº£n Ä‘i: NhÃ¡p â†’ TrÃ¬nh kÃ½ â†’ ÄÃ£ kÃ½ â†’ PhÃ¡t hÃ nh
- âœ… PhÃ¢n quyá»n theo phÃ²ng ban (VP-TH, HC-QP, TC-KH, TP-HT, Album...)
- âœ… LÆ°u trá»¯ theo quy Ä‘á»‹nh (vÄƒn báº£n vÄ©nh viá»…n, thá»i háº¡n 70 nÄƒm, 10 nÄƒm...)

---

## ğŸ“Š HIá»†N TRáº NG Há»† THá»NG

### âœ… ÄÃƒ CÃ“ (Current Implementation)

#### 1. **Giao diá»‡n cÆ¡ báº£n**
- âœ… Split view: TreeView (250px) + DataGrid
- âœ… Material Design UI
- âœ… TÃ¬m kiáº¿m, lá»c cÆ¡ báº£n
- âœ… CRUD vÄƒn báº£n

#### 2. **ThÆ° má»¥c Ä‘Æ¡n giáº£n**
- âœ… TreeView hierarchy
- âœ… Document count
- âš ï¸ **CHÆ¯A ÄÃšNG NGHIá»†P Vá»¤** - Thiáº¿u cáº¥u trÃºc chuáº©n cÆ¡ quan hÃ nh chÃ­nh

---

## ğŸ—ï¸ Cáº¤U TRÃšC THÆ¯ Má»¤C CHUáº¨N CÆ  QUAN NHÃ€ NÆ¯á»šC

### ğŸ“‹ 11 PHáº¦N CHÃNH (Standard Folder Structure)

### ğŸ“‹ 11 PHáº¦N CHÃNH (Standard Folder Structure)

```
ğŸ“ KHO TÃ€I LIá»†U CÆ  QUAN
â”‚
â”œâ”€ ğŸ“‚ 01. VÄ‚N Báº¢N PHÃP LUáº¬T
â”‚  â”œâ”€ ğŸ“‚ Hiáº¿n phÃ¡p
â”‚  â”œâ”€ ğŸ“‚ Luáº­t
â”‚  â”œâ”€ ğŸ“‚ PhÃ¡p lá»‡nh
â”‚  â”œâ”€ ğŸ“‚ Nghá»‹ quyáº¿t (Quá»‘c há»™i, HÄND)
â”‚  â”œâ”€ ğŸ“‚ Nghá»‹ Ä‘á»‹nh (ChÃ­nh phá»§)
â”‚  â”œâ”€ ğŸ“‚ ThÃ´ng tÆ° (Bá»™, ngÃ nh)
â”‚  â”œâ”€ ğŸ“‚ Quyáº¿t Ä‘á»‹nh (UBND cÃ¡c cáº¥p)
â”‚  â”œâ”€ ğŸ“‚ Chá»‰ thá»‹
â”‚  â””â”€ ğŸ“‚ HÆ°á»›ng dáº«n, Quy Ä‘á»‹nh
â”‚
â”œâ”€ ğŸ“‚ 02. VÄ‚N Báº¢N ÄI (PhÃ¡t hÃ nh)
â”‚  â”œâ”€ ğŸ“‚ [NÄƒm 2024]
â”‚  â”‚  â”œâ”€ ğŸ“‚ CÃ´ng vÄƒn Ä‘i
â”‚  â”‚  â”œâ”€ ğŸ“‚ Quyáº¿t Ä‘á»‹nh
â”‚  â”‚  â”œâ”€ ğŸ“‚ ThÃ´ng bÃ¡o
â”‚  â”‚  â”œâ”€ ğŸ“‚ BÃ¡o cÃ¡o (gá»­i cáº¥p trÃªn)
â”‚  â”‚  â”œâ”€ ğŸ“‚ Tá» trÃ¬nh
â”‚  â”‚  â””â”€ ğŸ“‚ Káº¿ hoáº¡ch
â”‚  â”œâ”€ ğŸ“‚ [NÄƒm 2025]
â”‚  â””â”€ ğŸ“‚ [NÄƒm 2026]
â”‚
â”œâ”€ ğŸ“‚ 03. VÄ‚N Báº¢N Äáº¾N (Tiáº¿p nháº­n)
â”‚  â”œâ”€ ğŸ“‚ [NÄƒm 2024]
â”‚  â”‚  â”œâ”€ ğŸ“‚ Tá»« Trung Æ°Æ¡ng (ChÃ­nh phá»§, Bá»™)
â”‚  â”‚  â”œâ”€ ğŸ“‚ Tá»« cáº¥p Tá»‰nh (UBND, Sá»Ÿ)
â”‚  â”‚  â”œâ”€ ğŸ“‚ Tá»« cáº¥p Huyá»‡n (UBND, PhÃ²ng)
â”‚  â”‚  â”œâ”€ ğŸ“‚ Tá»« cÃ¡c xÃ£/phÆ°á»ng
â”‚  â”‚  â””â”€ ğŸ“‚ Tá»« tá»• chá»©c, cÃ¡ nhÃ¢n
â”‚  â”œâ”€ ğŸ“‚ [NÄƒm 2025]
â”‚  â””â”€ ğŸ“‚ [NÄƒm 2026]
â”‚
â”œâ”€ ğŸ“‚ 04. Há»’ SÆ  CÃ”NG VIá»†C (Theo lÄ©nh vá»±c)
â”‚  â”œâ”€ ğŸ“‚ Ná»™i vá»¥ - Tá»• chá»©c
â”‚  â”‚  â”œâ”€ ğŸ“‚ BiÃªn cháº¿, tuyá»ƒn dá»¥ng
â”‚  â”‚  â”œâ”€ ğŸ“‚ ÄÃ o táº¡o, bá»“i dÆ°á»¡ng
â”‚  â”‚  â””â”€ ğŸ“‚ Khen thÆ°á»Ÿng, ká»· luáº­t
â”‚  â”œâ”€ ğŸ“‚ TÃ i chÃ­nh - NgÃ¢n sÃ¡ch
â”‚  â”‚  â”œâ”€ ğŸ“‚ Dá»± toÃ¡n
â”‚  â”‚  â”œâ”€ ğŸ“‚ Quyáº¿t toÃ¡n
â”‚  â”‚  â””â”€ ğŸ“‚ Thu chi
â”‚  â”œâ”€ ğŸ“‚ Äáº¥t Ä‘ai - XÃ¢y dá»±ng
â”‚  â”‚  â”œâ”€ ğŸ“‚ Cáº¥p giáº¥y CNQSD Ä‘áº¥t
â”‚  â”‚  â”œâ”€ ğŸ“‚ Giáº¥y phÃ©p xÃ¢y dá»±ng
â”‚  â”‚  â””â”€ ğŸ“‚ Quy hoáº¡ch
â”‚  â”œâ”€ ğŸ“‚ VÄƒn hÃ³a - XÃ£ há»™i
â”‚  â”‚  â”œâ”€ ğŸ“‚ GiÃ¡o dá»¥c
â”‚  â”‚  â”œâ”€ ğŸ“‚ Y táº¿
â”‚  â”‚  â””â”€ ğŸ“‚ Thá»ƒ thao, vÄƒn nghá»‡
â”‚  â”œâ”€ ğŸ“‚ Kinh táº¿ - PhÃ¡t triá»ƒn
â”‚  â”‚  â”œâ”€ ğŸ“‚ NÃ´ng nghiá»‡p
â”‚  â”‚  â”œâ”€ ğŸ“‚ CÃ´ng nghiá»‡p, thÆ°Æ¡ng máº¡i
â”‚  â”‚  â””â”€ ğŸ“‚ Du lá»‹ch
â”‚  â””â”€ ğŸ“‚ An ninh - Tráº­t tá»±
â”‚
â”œâ”€ ğŸ“‚ 05. Há»’ SÆ  Dá»° ÃN - CÃ”NG TRÃŒNH
â”‚  â”œâ”€ ğŸ“‚ [TÃªn dá»± Ã¡n 1]
â”‚  â”‚  â”œâ”€ ğŸ“‚ VÄƒn báº£n phÃª duyá»‡t
â”‚  â”‚  â”œâ”€ ğŸ“‚ Há»“ sÆ¡ thiáº¿t káº¿
â”‚  â”‚  â”œâ”€ ğŸ“‚ Há»£p Ä‘á»“ng, tháº§u
â”‚  â”‚  â”œâ”€ ğŸ“‚ Tiáº¿n Ä‘á»™ thi cÃ´ng
â”‚  â”‚  â”œâ”€ ğŸ“‚ Nghiá»‡m thu
â”‚  â”‚  â””â”€ ğŸ–¼ï¸ Album áº£nh cÃ´ng trÃ¬nh
â”‚  â””â”€ ğŸ“‚ [TÃªn dá»± Ã¡n 2]
â”‚
â”œâ”€ ğŸ–¼ï¸ 06. ALBUM áº¢NH - HÃŒNH áº¢NH
â”‚  â”œâ”€ ğŸ“‚ Sá»± kiá»‡n - Há»™i nghá»‹
â”‚  â”‚  â”œâ”€ ğŸ“‚ [2024] Äáº¡i há»™i Äáº£ng bá»™
â”‚  â”‚  â”œâ”€ ğŸ“‚ [2024] Lá»… khÃ¡nh thÃ nh
â”‚  â”‚  â””â”€ ğŸ“‚ [2025] Há»™i nghá»‹ cÃ¡n bá»™
â”‚  â”œâ”€ ğŸ“‚ Hoáº¡t Ä‘á»™ng thÆ°á»ng xuyÃªn
â”‚  â”‚  â”œâ”€ ğŸ“‚ Lá»… chÃ o cá»
â”‚  â”‚  â”œâ”€ ğŸ“‚ Sinh hoáº¡t Äáº£ng, ÄoÃ n
â”‚  â”‚  â””â”€ ğŸ“‚ Há»p giao ban
â”‚  â”œâ”€ ğŸ“‚ CÃ´ng trÃ¬nh - Dá»± Ã¡n
â”‚  â”‚  â”œâ”€ ğŸ“‚ TrÆ°á»›c thi cÃ´ng
â”‚  â”‚  â”œâ”€ ğŸ“‚ Trong thi cÃ´ng
â”‚  â”‚  â””â”€ ğŸ“‚ Sau hoÃ n thÃ nh
â”‚  â”œâ”€ ğŸ“‚ Kháº£o sÃ¡t - Thá»±c Ä‘á»‹a
â”‚  â”‚  â”œâ”€ ğŸ“‚ Kháº£o sÃ¡t Ä‘áº¥t Ä‘ai
â”‚  â”‚  â”œâ”€ ğŸ“‚ Kiá»ƒm tra hiá»‡n trÆ°á»ng
â”‚  â”‚  â””â”€ ğŸ“‚ LÃ m viá»‡c vá»›i dÃ¢n
â”‚  â”œâ”€ ğŸ“‚ VÄƒn hÃ³a - Lá»… há»™i
â”‚  â”‚  â”œâ”€ ğŸ“‚ Táº¿t NguyÃªn ÄÃ¡n
â”‚  â”‚  â”œâ”€ ğŸ“‚ NgÃ y lá»… lá»›n
â”‚  â”‚  â””â”€ ğŸ“‚ Lá»… há»™i Ä‘á»‹a phÆ°Æ¡ng
â”‚  â””â”€ ğŸ“‚ Táº­p thá»ƒ - CÃ¡ nhÃ¢n
â”‚      â”œâ”€ ğŸ“‚ áº¢nh táº­p thá»ƒ lÃ£nh Ä‘áº¡o
â”‚      â””â”€ ğŸ“‚ Hoáº¡t Ä‘á»™ng CBCC
â”‚
â”œâ”€ ğŸ“‚ 07. MáºªU VÄ‚N Báº¢N - TEMPLATE
â”‚  â”œâ”€ ğŸ“‚ Máº«u theo loáº¡i
â”‚  â”‚  â”œâ”€ ğŸ“„ CÃ´ng vÄƒn.docx
â”‚  â”‚  â”œâ”€ ğŸ“„ BÃ¡o cÃ¡o.docx
â”‚  â”‚  â”œâ”€ ğŸ“„ Tá» trÃ¬nh.docx
â”‚  â”‚  â”œâ”€ ğŸ“„ Quyáº¿t Ä‘á»‹nh.docx
â”‚  â”‚  â””â”€ ğŸ“„ Káº¿ hoáº¡ch.docx
â”‚  â””â”€ ğŸ“‚ Máº«u theo lÄ©nh vá»±c
â”‚      â”œâ”€ ğŸ“‚ Ná»™i vá»¥
â”‚      â”œâ”€ ğŸ“‚ TÃ i chÃ­nh
â”‚      â”œâ”€ ğŸ“‚ Äáº¥t Ä‘ai
â”‚      â””â”€ ğŸ“‚ VÄƒn hÃ³a - XÃ£ há»™i
â”‚
â”œâ”€ ğŸ“‚ 08. BÃO CÃO - THá»NG KÃŠ
â”‚  â”œâ”€ ğŸ“‚ BÃ¡o cÃ¡o Ä‘á»‹nh ká»³
â”‚  â”‚  â”œâ”€ ğŸ“‚ Tuáº§n
â”‚  â”‚  â”œâ”€ ğŸ“‚ ThÃ¡ng
â”‚  â”‚  â”œâ”€ ğŸ“‚ QuÃ½
â”‚  â”‚  â””â”€ ğŸ“‚ NÄƒm
â”‚  â””â”€ ğŸ“‚ BÃ¡o cÃ¡o chuyÃªn Ä‘á»
â”‚
â”œâ”€ ğŸ“‚ 09. TÃ€I LIá»†U Há»ŒC Táº¬P - NGHIá»†P Vá»¤
â”‚  â”œâ”€ ğŸ“‚ TÃ i liá»‡u Ä‘Ã o táº¡o
â”‚  â”œâ”€ ğŸ“‚ HÆ°á»›ng dáº«n nghiá»‡p vá»¥
â”‚  â”œâ”€ ğŸ“‚ SÃ¡ch chuyÃªn ngÃ nh
â”‚  â””â”€ ğŸ“‚ BÃ i giáº£ng, slide
â”‚
â”œâ”€ ğŸ“‚ 10. LÆ¯U TRá»® - ÄÃƒ Háº¾T HIá»†U Lá»°C
â”‚  â”œâ”€ ğŸ“‚ VÄƒn báº£n cÅ© (trÆ°á»›c 2020)
â”‚  â”œâ”€ ğŸ“‚ VÄƒn báº£n Ä‘Ã£ thay tháº¿
â”‚  â””â”€ ğŸ“‚ Há»“ sÆ¡ Ä‘Ã£ Ä‘Ã³ng
â”‚
â””â”€ ğŸ“‚ 11. CÃ NHÃ‚N (Workspace riÃªng)
   â”œâ”€ ğŸ“‚ VÄƒn báº£n nhÃ¡p
   â”œâ”€ ğŸ“‚ Ghi chÃº cÃ´ng viá»‡c
   â””â”€ ğŸ“‚ TÃ i liá»‡u cÃ¡ nhÃ¢n
```

---

## ğŸš€ TÃNH NÄ‚NG THEO NGHIá»†P Vá»¤ THá»°C Táº¾

### 1. **SETUP BAN Äáº¦U - Chá»n loáº¡i cÆ¡ quan** ğŸŒŸ Æ¯U TIÃŠN CAO

**BÆ°á»›c 1: First-time Setup Wizard**

Khi cháº¡y láº§n Ä‘áº§u, hiá»ƒn thá»‹ wizard Ä‘á»ƒ chá»n loáº¡i cÆ¡ quan:

```xml
<Window Title="ğŸ›ï¸ THIáº¾T Láº¬P CÆ  QUAN" Width="600" Height="500">
    <StackPanel Margin="30">
        <TextBlock Text="ğŸ›ï¸ THIáº¾T Láº¬P CÆ  QUAN" 
                   FontSize="24" FontWeight="Bold" 
                   Margin="0,0,0,20"/>
        
        <TextBlock Text="Chá»n loáº¡i cÆ¡ quan cá»§a báº¡n:" 
                   FontSize="14" Margin="0,0,0,10"/>
        
        <!-- Radio buttons -->
        <RadioButton Content="â—‹ UBND XÃ£/PhÆ°á»ng/Thá»‹ tráº¥n" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ UBND Huyá»‡n/Quáº­n/Thá»‹ xÃ£" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ UBND Tá»‰nh/ThÃ nh phá»‘ trá»±c thuá»™c TW" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ Há»™i NÃ´ng dÃ¢n" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ Há»™i Phá»¥ ná»¯" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ ÄoÃ n Thanh niÃªn" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ Há»™i Cá»±u chiáº¿n binh" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ CÃ´ng Ä‘oÃ n" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ Sá»Ÿ/Ban/NgÃ nh (cáº¥p tá»‰nh)" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ PhÃ²ng (cáº¥p huyá»‡n)" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ TrÆ°á»ng há»c (MN/TH/THCS/THPT/ÄH)" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ Tráº¡m y táº¿/Bá»‡nh viá»‡n" 
                     FontSize="14" Margin="0,10"/>
        <RadioButton Content="â—‹ TÃ¹y chá»‰nh (Tá»± thiáº¿t káº¿)" 
                     FontSize="14" Margin="0,10"/>
        
        <StackPanel Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,30,0,0">
            <Button Content="[Tiáº¿p theo â†’]" 
                    Width="120" Height="40"
                    Click="NextStep_Click"/>
        </StackPanel>
    </StackPanel>
</Window>
```

**BÆ°á»›c 2: TÃªn cÆ¡ quan**

```xml
<StackPanel>
    <TextBlock Text="TÃªn Ä‘áº§y Ä‘á»§ cÆ¡ quan:" Margin="0,0,0,10"/>
    <TextBox Text="á»¦Y BAN NHÃ‚N DÃ‚N XÃƒ HÃ’A BÃŒNH" 
             FontSize="16" Padding="10"/>
    
    <TextBlock Text="TÃªn viáº¿t táº¯t:" Margin="0,20,0,10"/>
    <TextBox Text="UBND xÃ£ HÃ²a BÃ¬nh" 
             FontSize="16" Padding="10"/>
</StackPanel>
```

**BÆ°á»›c 3: Tá»± Ä‘á»™ng táº¡o cáº¥u trÃºc**

Code tá»± Ä‘á»™ng táº¡o 11 folder chÃ­nh + sub-folders theo loáº¡i cÆ¡ quan:

```csharp
public class OrganizationSetupService
{
    public void CreateFolderStructure(OrganizationType type, string orgName)
    {
        switch (type)
        {
            case OrganizationType.UBNDXa:
                CreateStandardStructure(orgName);
                AddSpecificFolders_UBNDXa();
                break;
            
            case OrganizationType.TruongHoc:
                CreateStandardStructure(orgName);
                AddSpecificFolders_School();
                break;
                
            // ... other types
        }
    }
    
    private void CreateStandardStructure(string orgName)
    {
        // Táº¡o 11 folder chÃ­nh
        var folders = new[]
        {
            "01. VÄ‚N Báº¢N PHÃP LUáº¬T",
            "02. VÄ‚N Báº¢N ÄI",
            "03. VÄ‚N Báº¢N Äáº¾N",
            "04. Há»’ SÆ  CÃ”NG VIá»†C",
            "05. Há»’ SÆ  Dá»° ÃN - CÃ”NG TRÃŒNH",
            "06. ALBUM áº¢NH",
            "07. MáºªU VÄ‚N Báº¢N",
            "08. BÃO CÃO - THá»NG KÃŠ",
            "09. TÃ€I LIá»†U Há»ŒC Táº¬P",
            "10. LÆ¯U TRá»®",
            "11. CÃ NHÃ‚N"
        };
        
        foreach (var folder in folders)
        {
            _documentService.CreateFolder(new Folder
            {
                Name = folder,
                ParentId = null,
                Icon = "ğŸ“‚",
                OrganizationName = orgName
            });
        }
    }
    
    private void AddSpecificFolders_UBNDXa()
    {
        // VÄƒn báº£n phÃ¡p luáº­t
        var plFolder = FindFolder("01. VÄ‚N Báº¢N PHÃP LUáº¬T");
        CreateSubFolders(plFolder.Id, new[]
        {
            "Hiáº¿n phÃ¡p",
            "Luáº­t",
            "PhÃ¡p lá»‡nh",
            "Nghá»‹ quyáº¿t (Quá»‘c há»™i, HÄND)",
            "Nghá»‹ Ä‘á»‹nh (ChÃ­nh phá»§)",
            "ThÃ´ng tÆ° (Bá»™, ngÃ nh)",
            "Quyáº¿t Ä‘á»‹nh (UBND cÃ¡c cáº¥p)",
            "Chá»‰ thá»‹",
            "HÆ°á»›ng dáº«n, Quy Ä‘á»‹nh"
        });
        
        // VÄƒn báº£n Ä‘i - Táº¡o folders theo nÄƒm
        var vbDiFolder = FindFolder("02. VÄ‚N Báº¢N ÄI");
        for (int year = 2024; year <= DateTime.Now.Year; year++)
        {
            var yearFolder = CreateFolder($"[NÄƒm {year}]", vbDiFolder.Id);
            CreateSubFolders(yearFolder.Id, new[]
            {
                "CÃ´ng vÄƒn Ä‘i",
                "Quyáº¿t Ä‘á»‹nh",
                "ThÃ´ng bÃ¡o",
                "BÃ¡o cÃ¡o (gá»­i cáº¥p trÃªn)",
                "Tá» trÃ¬nh",
                "Káº¿ hoáº¡ch"
            });
        }
        
        // VÄƒn báº£n Ä‘áº¿n - Táº¡o folders theo nÄƒm + nguá»“n
        var vbDenFolder = FindFolder("03. VÄ‚N Báº¢N Äáº¾N");
        for (int year = 2024; year <= DateTime.Now.Year; year++)
        {
            var yearFolder = CreateFolder($"[NÄƒm {year}]", vbDenFolder.Id);
            CreateSubFolders(yearFolder.Id, new[]
            {
                "Tá»« Trung Æ°Æ¡ng (ChÃ­nh phá»§, Bá»™)",
                "Tá»« cáº¥p Tá»‰nh (UBND, Sá»Ÿ)",
                "Tá»« cáº¥p Huyá»‡n (UBND, PhÃ²ng)",
                "Tá»« cÃ¡c xÃ£/phÆ°á»ng",
                "Tá»« tá»• chá»©c, cÃ¡ nhÃ¢n"
            });
        }
        
        // Há»“ sÆ¡ cÃ´ng viá»‡c - 6 lÄ©nh vá»±c chÃ­nh
        var hscvFolder = FindFolder("04. Há»’ SÆ  CÃ”NG VIá»†C");
        
        // 1. Ná»™i vá»¥ - Tá»• chá»©c
        var nvFolder = CreateFolder("Ná»™i vá»¥ - Tá»• chá»©c", hscvFolder.Id);
        CreateSubFolders(nvFolder.Id, new[]
        {
            "BiÃªn cháº¿, tuyá»ƒn dá»¥ng",
            "ÄÃ o táº¡o, bá»“i dÆ°á»¡ng",
            "Khen thÆ°á»Ÿng, ká»· luáº­t"
        });
        
        // 2. TÃ i chÃ­nh - NgÃ¢n sÃ¡ch
        var tcFolder = CreateFolder("TÃ i chÃ­nh - NgÃ¢n sÃ¡ch", hscvFolder.Id);
        CreateSubFolders(tcFolder.Id, new[]
        {
            "Dá»± toÃ¡n",
            "Quyáº¿t toÃ¡n",
            "Thu chi"
        });
        
        // 3. Äáº¥t Ä‘ai - XÃ¢y dá»±ng
        var ddFolder = CreateFolder("Äáº¥t Ä‘ai - XÃ¢y dá»±ng", hscvFolder.Id);
        CreateSubFolders(ddFolder.Id, new[]
        {
            "Cáº¥p giáº¥y CNQSD Ä‘áº¥t",
            "Giáº¥y phÃ©p xÃ¢y dá»±ng",
            "Quy hoáº¡ch"
        });
        
        // 4. VÄƒn hÃ³a - XÃ£ há»™i
        var vhFolder = CreateFolder("VÄƒn hÃ³a - XÃ£ há»™i", hscvFolder.Id);
        CreateSubFolders(vhFolder.Id, new[]
        {
            "GiÃ¡o dá»¥c",
            "Y táº¿",
            "Thá»ƒ thao, vÄƒn nghá»‡"
        });
        
        // 5. Kinh táº¿ - PhÃ¡t triá»ƒn
        var ktFolder = CreateFolder("Kinh táº¿ - PhÃ¡t triá»ƒn", hscvFolder.Id);
        CreateSubFolders(ktFolder.Id, new[]
        {
            "NÃ´ng nghiá»‡p",
            "CÃ´ng nghiá»‡p, thÆ°Æ¡ng máº¡i",
            "Du lá»‹ch"
        });
        
        // 6. An ninh - Tráº­t tá»±
        CreateFolder("An ninh - Tráº­t tá»±", hscvFolder.Id);
        
        // Album áº£nh - TÃ­ch há»£p vá»›i PhotoAlbumPageNew
        var albumFolder = FindFolder("06. ALBUM áº¢NH");
        CreateSubFolders(albumFolder.Id, new[]
        {
            "Sá»± kiá»‡n - Há»™i nghá»‹",
            "Hoáº¡t Ä‘á»™ng thÆ°á»ng xuyÃªn",
            "CÃ´ng trÃ¬nh - Dá»± Ã¡n",
            "Kháº£o sÃ¡t - Thá»±c Ä‘á»‹a",
            "VÄƒn hÃ³a - Lá»… há»™i",
            "Táº­p thá»ƒ - CÃ¡ nhÃ¢n"
        });
        
        // Máº«u vÄƒn báº£n
        var mauVBFolder = FindFolder("07. MáºªU VÄ‚N Báº¢N");
        var mauTheoLoai = CreateFolder("Máº«u theo loáº¡i", mauVBFolder.Id);
        var mauTheoLinhVuc = CreateFolder("Máº«u theo lÄ©nh vá»±c", mauVBFolder.Id);
        
        // BÃ¡o cÃ¡o - Thá»‘ng kÃª
        var baoCaoFolder = FindFolder("08. BÃO CÃO - THá»NG KÃŠ");
        var bcDinhKy = CreateFolder("BÃ¡o cÃ¡o Ä‘á»‹nh ká»³", baoCaoFolder.Id);
        CreateSubFolders(bcDinhKy.Id, new[] { "Tuáº§n", "ThÃ¡ng", "QuÃ½", "NÄƒm" });
        CreateFolder("BÃ¡o cÃ¡o chuyÃªn Ä‘á»", baoCaoFolder.Id);
        
        // TÃ i liá»‡u há»c táº­p
        var tlhtFolder = FindFolder("09. TÃ€I LIá»†U Há»ŒC Táº¬P");
        CreateSubFolders(tlhtFolder.Id, new[]
        {
            "TÃ i liá»‡u Ä‘Ã o táº¡o",
            "HÆ°á»›ng dáº«n nghiá»‡p vá»¥",
            "SÃ¡ch chuyÃªn ngÃ nh",
            "BÃ i giáº£ng, slide"
        });
        
        // LÆ°u trá»¯
        var luuTruFolder = FindFolder("10. LÆ¯U TRá»®");
        CreateSubFolders(luuTruFolder.Id, new[]
        {
            "VÄƒn báº£n cÅ© (trÆ°á»›c 2020)",
            "VÄƒn báº£n Ä‘Ã£ thay tháº¿",
            "Há»“ sÆ¡ Ä‘Ã£ Ä‘Ã³ng"
        });
        
        // CÃ¡ nhÃ¢n
        var caNhanFolder = FindFolder("11. CÃ NHÃ‚N");
        CreateSubFolders(caNhanFolder.Id, new[]
        {
            "VÄƒn báº£n nhÃ¡p",
            "Ghi chÃº cÃ´ng viá»‡c",
            "TÃ i liá»‡u cÃ¡ nhÃ¢n"
        });
    }
}
```

---

### 2. **PHÃ‚N QUYá»€N PHÃ’NG BAN** ğŸŒŸ Æ¯U TIÃŠN CAO

**Cáº¥u trÃºc phÃ²ng ban Ä‘iá»ƒn hÃ¬nh UBND xÃ£:**

```csharp
public enum Department
{
    VP_TH,      // VÄƒn phÃ²ng - Tá»•ng há»£p
    HC_QP,      // HÃ nh chÃ­nh - Quá»‘c phÃ²ng
    TC_KH,      // TÃ i chÃ­nh - Káº¿ hoáº¡ch
    TP_HT,      // TÆ° phÃ¡p - Há»™ tá»‹ch
    NN_TN,      // NÃ´ng nghiá»‡p - TÃ i nguyÃªn
    VH_XH,      // VÄƒn hÃ³a - XÃ£ há»™i
    ALBUM       // Quáº£n lÃ½ Album áº£nh
}

public class User
{
    public string Id { get; set; }
    public string Name { get; set; }
    public Department Department { get; set; }
    public UserRole Role { get; set; } // Admin, Leader, Staff, Viewer
}

public enum UserRole
{
    Admin,      // ToÃ n quyá»n (Chá»§ tá»‹ch, PhÃ³ Chá»§ tá»‹ch)
    Leader,     // TrÆ°á»Ÿng/PhÃ³ phÃ²ng - Xem/Sá»­a vÄƒn báº£n cá»§a phÃ²ng mÃ¬nh
    Staff,      // CÃ¡n bá»™ - Táº¡o/Sá»­a vÄƒn báº£n nhÃ¡p, khÃ´ng xÃ³a
    Viewer      // Chá»‰ xem - KhÃ´ng sá»­a xÃ³a
}
```

**UI: Filter theo phÃ²ng ban**

```xml
<!-- ThÃªm vÃ o toolbar -->
<ComboBox x:Name="cboDepartment" 
          materialDesign:HintAssist.Hint="[PhÃ²ng ban â–¼]"
          Width="200" Margin="0,0,10,0"
          SelectionChanged="DepartmentFilter_Changed">
    <ComboBoxItem Content="Táº¥t cáº£" IsSelected="True"/>
    <ComboBoxItem Content="â–¶ VÄƒn phÃ²ng - Tá»•ng há»£p"/>
    <ComboBoxItem Content="â–¶ HÃ nh chÃ­nh - Quá»‘c phÃ²ng"/>
    <ComboBoxItem Content="â–¶ TÃ i chÃ­nh - Káº¿ hoáº¡ch"/>
    <ComboBoxItem Content="â–¶ TÆ° phÃ¡p - Há»™ tá»‹ch"/>
    <ComboBoxItem Content="â–¶ NÃ´ng nghiá»‡p - TÃ i nguyÃªn"/>
    <ComboBoxItem Content="â–¶ VÄƒn hÃ³a - XÃ£ há»™i"/>
    <ComboBoxItem Content="â–¶ Album"/>
</ComboBox>
```

**PhÃ¢n quyá»n logic:**

```csharp
public class PermissionService
{
    private User _currentUser;
    
    public bool CanView(Document doc)
    {
        // Admin xem táº¥t cáº£
        if (_currentUser.Role == UserRole.Admin) return true;
        
        // VÄƒn báº£n cÃ´ng khai - ai cÅ©ng xem Ä‘Æ°á»£c
        if (doc.IsPublic) return true;
        
        // Chá»‰ xem vÄƒn báº£n cá»§a phÃ²ng mÃ¬nh
        return doc.Department == _currentUser.Department;
    }
    
    public bool CanEdit(Document doc)
    {
        // Admin sá»­a táº¥t cáº£
        if (_currentUser.Role == UserRole.Admin) return true;
        
        // Viewer khÃ´ng sá»­a
        if (_currentUser.Role == UserRole.Viewer) return false;
        
        // Leader sá»­a vÄƒn báº£n cá»§a phÃ²ng mÃ¬nh
        if (_currentUser.Role == UserRole.Leader)
            return doc.Department == _currentUser.Department;
        
        // Staff chá»‰ sá»­a vÄƒn báº£n nhÃ¡p cá»§a mÃ¬nh
        if (_currentUser.Role == UserRole.Staff)
            return doc.CreatedBy == _currentUser.Id && 
                   doc.Status == DocumentStatus.Draft;
        
        return false;
    }
    
    public bool CanDelete(Document doc)
    {
        // Chá»‰ Admin vÃ  Leader Ä‘Æ°á»£c xÃ³a
        if (_currentUser.Role == UserRole.Admin) return true;
        
        if (_currentUser.Role == UserRole.Leader)
            return doc.Department == _currentUser.Department &&
                   doc.Status == DocumentStatus.Draft;
        
        return false;
    }
}
```

---

### 3. **WORKFLOW VÄ‚N Báº¢N ÄI** ğŸŒŸ Æ¯U TIÃŠN CAO

**Quy trÃ¬nh phÃ¡t hÃ nh vÄƒn báº£n chÃ­nh thá»©c:**

```
1. NHÃP (Draft)
   â†“ [CÃ¡n bá»™ soáº¡n tháº£o]
   
2. TRÃŒNH KÃ (Pending Approval)
   â†“ [Gá»­i lÃªn TrÆ°á»Ÿng phÃ²ng]
   
3. PHÃŠ DUYá»†T (Approved)
   â†“ [TrÆ°á»Ÿng phÃ²ng duyá»‡t]
   â†“ [Gá»­i lÃªn Chá»§ tá»‹ch/PhÃ³ Chá»§ tá»‹ch]
   
4. ÄÃƒ KÃ (Signed)
   â†“ [LÃ£nh Ä‘áº¡o kÃ½]
   
5. PHÃT HÃ€NH (Published)
   â†“ [Cáº¥p sá»‘ vÄƒn báº£n, ban hÃ nh]
   
6. ÄÃƒ Gá»¬I (Sent)
```

**Database Model:**

```csharp
public enum DocumentStatus
{
    Draft,              // NhÃ¡p - Ä‘ang soáº¡n
    PendingApproval,    // TrÃ¬nh kÃ½ - chá» duyá»‡t
    Approved,           // ÄÃ£ duyá»‡t - chá» kÃ½
    Signed,             // ÄÃ£ kÃ½ - chá» phÃ¡t hÃ nh
    Published,          // ÄÃ£ phÃ¡t hÃ nh - cÃ³ sá»‘ VB
    Sent,               // ÄÃ£ gá»­i Ä‘i
    Archived            // ÄÃ£ lÆ°u trá»¯
}

public class Document
{
    // ... existing fields ...
    
    public DocumentStatus Status { get; set; } = DocumentStatus.Draft;
    public string CreatedBy { get; set; }        // User ID ngÆ°á»i táº¡o
    public string ApprovedBy { get; set; }       // User ID ngÆ°á»i duyá»‡t
    public DateTime? ApprovedDate { get; set; }
    public string SignedBy { get; set; }         // User ID ngÆ°á»i kÃ½
    public DateTime? SignedDate { get; set; }
    public string PublishedBy { get; set; }      // User ID ngÆ°á»i phÃ¡t hÃ nh
    public DateTime? PublishedDate { get; set; }
    
    public Department Department { get; set; }
    public bool IsPublic { get; set; } = false;
    
    // Workflow comments
    public List<WorkflowComment> Comments { get; set; } = new();
}

public class WorkflowComment
{
    public string Id { get; set; }
    public string UserId { get; set; }
    public string UserName { get; set; }
    public DateTime Timestamp { get; set; }
    public string Action { get; set; }  // "TrÃ¬nh kÃ½", "PhÃª duyá»‡t", "Tá»« chá»‘i", "KÃ½"
    public string Comment { get; set; }
}
```

**UI: Status badges trong DataGrid:**

```xml
<DataGridTemplateColumn Header="Tráº¡ng thÃ¡i" Width="150">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <!-- Draft -->
            <Border Background="#FFF3E5" CornerRadius="3" Padding="8,4"
                    Visibility="{Binding Status, Converter={StaticResource StatusToVisibility}, ConverterParameter=Draft}">
                <TextBlock Text="ğŸ“ NhÃ¡p" Foreground="#F57C00"/>
            </Border>
            
            <!-- Pending Approval -->
            <Border Background="#E3F2FD" CornerRadius="3" Padding="8,4"
                    Visibility="{Binding Status, Converter={StaticResource StatusToVisibility}, ConverterParameter=PendingApproval}">
                <TextBlock Text="â³ TrÃ¬nh kÃ½" Foreground="#1976D2"/>
            </Border>
            
            <!-- Approved -->
            <Border Background="#E8F5E9" CornerRadius="3" Padding="8,4"
                    Visibility="{Binding Status, Converter={StaticResource StatusToVisibility}, ConverterParameter=Approved}">
                <TextBlock Text="âœ… ÄÃ£ duyá»‡t" Foreground="#388E3C"/>
            </Border>
            
            <!-- Signed -->
            <Border Background="#F3E5F5" CornerRadius="3" Padding="8,4"
                    Visibility="{Binding Status, Converter={StaticResource StatusToVisibility}, ConverterParameter=Signed}">
                <TextBlock Text="ğŸ–Šï¸ ÄÃ£ kÃ½" Foreground="#7B1FA2"/>
            </Border>
            
            <!-- Published -->
            <Border Background="#E8EAF6" CornerRadius="3" Padding="8,4"
                    Visibility="{Binding Status, Converter={StaticResource StatusToVisibility}, ConverterParameter=Published}">
                <TextBlock Text="ğŸ“¢ ÄÃ£ phÃ¡t hÃ nh" Foreground="#303F9F"/>
            </Border>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>
```

**Action buttons theo status:**

```csharp
private void UpdateActionButtons(Document doc)
{
    // áº¨n táº¥t cáº£ buttons trÆ°á»›c
    btnEdit.Visibility = Visibility.Collapsed;
    btnDelete.Visibility = Visibility.Collapsed;
    btnSubmitApproval.Visibility = Visibility.Collapsed;
    btnApprove.Visibility = Visibility.Collapsed;
    btnReject.Visibility = Visibility.Collapsed;
    btnSign.Visibility = Visibility.Collapsed;
    btnPublish.Visibility = Visibility.Collapsed;
    
    switch (doc.Status)
    {
        case DocumentStatus.Draft:
            // NgÆ°á»i táº¡o: Sá»­a, XÃ³a, TrÃ¬nh kÃ½
            if (doc.CreatedBy == _currentUser.Id)
            {
                btnEdit.Visibility = Visibility.Visible;
                btnDelete.Visibility = Visibility.Visible;
                btnSubmitApproval.Visibility = Visibility.Visible;
            }
            break;
            
        case DocumentStatus.PendingApproval:
            // TrÆ°á»Ÿng phÃ²ng: Duyá»‡t, Tá»« chá»‘i
            if (_currentUser.Role == UserRole.Leader || 
                _currentUser.Role == UserRole.Admin)
            {
                btnApprove.Visibility = Visibility.Visible;
                btnReject.Visibility = Visibility.Visible;
            }
            break;
            
        case DocumentStatus.Approved:
            // LÃ£nh Ä‘áº¡o: KÃ½, Tá»« chá»‘i
            if (_currentUser.Role == UserRole.Admin)
            {
                btnSign.Visibility = Visibility.Visible;
                btnReject.Visibility = Visibility.Visible;
            }
            break;
            
        case DocumentStatus.Signed:
            // VÄƒn thÆ°: PhÃ¡t hÃ nh (cáº¥p sá»‘)
            if (_currentUser.Department == Department.VP_TH)
            {
                btnPublish.Visibility = Visibility.Visible;
            }
            break;
            
        case DocumentStatus.Published:
            // Chá»‰ xem, khÃ´ng sá»­a xÃ³a
            break;
    }
}
```

---

### 4. **Sá»” VÄ‚N Báº¢N ÄI/Äáº¾N** ğŸ“‹ Æ¯U TIÃŠN CAO

**TÃ­nh nÄƒng sá»• vÄƒn báº£n giá»‘ng sá»• tay truyá»n thá»‘ng:**

```xml
<TabControl>
    <TabItem Header="ğŸ“¤ Sá»• vÄƒn báº£n Ä‘i">
        <DataGrid ItemsSource="{Binding OutgoingDocuments}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="STT" Binding="{Binding Index}"/>
                <DataGridTextColumn Header="Sá»‘ kÃ½ hiá»‡u" Binding="{Binding Number}"/>
                <DataGridTextColumn Header="NgÃ y thÃ¡ng" Binding="{Binding IssueDate, StringFormat='dd/MM/yyyy'}"/>
                <DataGridTextColumn Header="TrÃ­ch yáº¿u" Binding="{Binding Subject}"/>
                <DataGridTextColumn Header="NÆ¡i gá»­i" Binding="{Binding Recipient}"/>
                <DataGridTextColumn Header="NgÆ°á»i kÃ½" Binding="{Binding SignedBy}"/>
                <DataGridTextColumn Header="Ghi chÃº" Binding="{Binding Notes}"/>
            </DataGrid.Columns>
        </DataGrid>
    </TabItem>
    
    <TabItem Header="ğŸ“¥ Sá»• vÄƒn báº£n Ä‘áº¿n">
        <DataGrid ItemsSource="{Binding IncomingDocuments}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="STT" Binding="{Binding Index}"/>
                <DataGridTextColumn Header="Sá»‘ kÃ½ hiá»‡u" Binding="{Binding Number}"/>
                <DataGridTextColumn Header="NgÃ y Ä‘áº¿n" Binding="{Binding ReceivedDate, StringFormat='dd/MM/yyyy'}"/>
                <DataGridTextColumn Header="NÆ¡i gá»­i" Binding="{Binding Issuer}"/>
                <DataGridTextColumn Header="TrÃ­ch yáº¿u" Binding="{Binding Subject}"/>
                <DataGridTextColumn Header="NgÃ y VB" Binding="{Binding IssueDate, StringFormat='dd/MM/yyyy'}"/>
                <DataGridTextColumn Header="NgÆ°á»i nháº­n" Binding="{Binding ReceivedBy}"/>
                <DataGridTextColumn Header="Chuyá»ƒn Ä‘áº¿n" Binding="{Binding ForwardedTo}"/>
                <DataGridTextColumn Header="Ghi chÃº" Binding="{Binding Notes}"/>
            </DataGrid.Columns>
        </DataGrid>
    </TabItem>
</TabControl>
```

**Export to Excel:**

```csharp
public void ExportToExcel(List<Document> documents, DocumentDirection direction)
{
    var workbook = new XLWorkbook();
    var worksheet = workbook.Worksheets.Add(
        direction == DocumentDirection.Outgoing ? "Sá»• vÄƒn báº£n Ä‘i" : "Sá»• vÄƒn báº£n Ä‘áº¿n"
    );
    
    // Header
    worksheet.Cell(1, 1).Value = "STT";
    worksheet.Cell(1, 2).Value = "Sá»‘ kÃ½ hiá»‡u";
    worksheet.Cell(1, 3).Value = "NgÃ y thÃ¡ng";
    worksheet.Cell(1, 4).Value = "TrÃ­ch yáº¿u";
    // ... more columns
    
    // Data
    int row = 2;
    foreach (var doc in documents)
    {
        worksheet.Cell(row, 1).Value = row - 1;
        worksheet.Cell(row, 2).Value = doc.Number;
        worksheet.Cell(row, 3).Value = doc.IssueDate.ToString("dd/MM/yyyy");
        worksheet.Cell(row, 4).Value = doc.Subject;
        // ... more data
        row++;
    }
    
    workbook.SaveAs($"So_van_ban_{direction}_{DateTime.Now:yyyyMMdd}.xlsx");
}
```

---

### 5. **TÃŒM KIáº¾M NÃ‚NG CAO** ğŸ”

**Multi-field search theo nghiá»‡p vá»¥:**

```xml
<Expander Header="ğŸ” TÃŒM KIáº¾M NÃ‚NG CAO" IsExpanded="False" Margin="0,0,0,15">
    <materialDesign:Card Padding="15">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Row 1 -->
            <TextBox Grid.Row="0" Grid.Column="0" Margin="0,0,10,10"
                     x:Name="txtSearchNumber"
                     materialDesign:HintAssist.Hint="ğŸ“„ Sá»‘ vÄƒn báº£n"/>
            <TextBox Grid.Row="0" Grid.Column="1" Margin="0,0,0,10"
                     x:Name="txtSearchTitle"
                     materialDesign:HintAssist.Hint="ğŸ“ TiÃªu Ä‘á»"/>
            
            <!-- Row 2 -->
            <TextBox Grid.Row="1" Grid.Column="0" Margin="0,0,10,10"
                     x:Name="txtSearchIssuer"
                     materialDesign:HintAssist.Hint="ğŸ¢ CÆ¡ quan ban hÃ nh"/>
            <ComboBox Grid.Row="1" Grid.Column="1" Margin="0,0,0,10"
                      x:Name="cboSearchType"
                      materialDesign:HintAssist.Hint="ğŸ“‘ Loáº¡i vÄƒn báº£n"/>
            
            <!-- Row 3 -->
            <DatePicker Grid.Row="2" Grid.Column="0" Margin="0,0,10,10"
                        x:Name="dpFromDate"
                        materialDesign:HintAssist.Hint="ğŸ“… Tá»« ngÃ y"/>
            <DatePicker Grid.Row="2" Grid.Column="1" Margin="0,0,0,10"
                        x:Name="dpToDate"
                        materialDesign:HintAssist.Hint="ğŸ“… Äáº¿n ngÃ y"/>
            
            <!-- Row 4 -->
            <ComboBox Grid.Row="3" Grid.Column="0" Margin="0,0,10,10"
                      x:Name="cboSearchDepartment"
                      materialDesign:HintAssist.Hint="ğŸ›ï¸ PhÃ²ng ban"/>
            <ComboBox Grid.Row="3" Grid.Column="1" Margin="0,0,0,10"
                      x:Name="cboSearchStatus"
                      materialDesign:HintAssist.Hint="ğŸ“Š Tráº¡ng thÃ¡i"/>
            
            <!-- Row 5: Tags -->
            <TextBox Grid.Row="4" Grid.ColumnSpan="2" Margin="0,0,0,10"
                     x:Name="txtSearchTags"
                     materialDesign:HintAssist.Hint="ğŸ·ï¸ Tags (cÃ¡ch nhau bá»Ÿi dáº¥u pháº©y)"/>
            
            <!-- Row 6: Buttons -->
            <StackPanel Grid.Row="5" Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="ğŸ” TÃ¬m kiáº¿m" 
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Click="AdvancedSearch_Click"
                        Margin="0,0,10,0"/>
                <Button Content="ğŸ”„ Reset" 
                        Style="{StaticResource MaterialDesignOutlinedButton}"
                        Click="ResetSearch_Click"/>
            </StackPanel>
        </Grid>
    </materialDesign:Card>
</Expander>
```

```csharp
private void AdvancedSearch_Click(object sender, RoutedEventArgs e)
{
    var query = _allDocuments.AsQueryable();
    
    // Sá»‘ vÄƒn báº£n
    if (!string.IsNullOrWhiteSpace(txtSearchNumber.Text))
        query = query.Where(d => d.Number.Contains(txtSearchNumber.Text, StringComparison.OrdinalIgnoreCase));
    
    // TiÃªu Ä‘á»
    if (!string.IsNullOrWhiteSpace(txtSearchTitle.Text))
        query = query.Where(d => d.Title.Contains(txtSearchTitle.Text, StringComparison.OrdinalIgnoreCase));
    
    // CÆ¡ quan
    if (!string.IsNullOrWhiteSpace(txtSearchIssuer.Text))
        query = query.Where(d => d.Issuer.Contains(txtSearchIssuer.Text, StringComparison.OrdinalIgnoreCase));
    
    // Loáº¡i vÄƒn báº£n
    if (cboSearchType.SelectedIndex > 0)
        query = query.Where(d => d.Type == (DocumentType)cboSearchType.SelectedItem);
    
    // Khoáº£ng thá»i gian
    if (dpFromDate.SelectedDate.HasValue)
        query = query.Where(d => d.IssueDate >= dpFromDate.SelectedDate.Value);
    if (dpToDate.SelectedDate.HasValue)
        query = query.Where(d => d.IssueDate <= dpToDate.SelectedDate.Value);
    
    // PhÃ²ng ban
    if (cboSearchDepartment.SelectedIndex > 0)
        query = query.Where(d => d.Department == (Department)cboSearchDepartment.SelectedItem);
    
    // Tráº¡ng thÃ¡i
    if (cboSearchStatus.SelectedIndex > 0)
        query = query.Where(d => d.Status == (DocumentStatus)cboSearchStatus.SelectedItem);
    
    // Tags
    if (!string.IsNullOrWhiteSpace(txtSearchTags.Text))
    {
        var tags = txtSearchTags.Text.Split(',').Select(t => t.Trim()).ToList();
        query = query.Where(d => d.Tags.Any(t => tags.Contains(t)));
    }
    
    dgDocuments.ItemsSource = query.OrderByDescending(d => d.IssueDate).ToList();
}
```

---

### 6. **BATCH OPERATIONS - Thao tÃ¡c hÃ ng loáº¡t** âš¡

**UI vá»›i selection mode:**

```xml
<!-- Batch Actions Bar -->
- Chá»n nhiá»u vÄƒn báº£n cÃ¹ng lÃºc (Ctrl+Click, Shift+Click)
- Di chuyá»ƒn hÃ ng loáº¡t sang thÆ° má»¥c khÃ¡c
- XÃ³a hÃ ng loáº¡t
- Gáº¯n tag hÃ ng loáº¡t
- Export hÃ ng loáº¡t

**Giao diá»‡n Ä‘á» xuáº¥t:**

```xml
<!-- Batch Actions Toolbar (áº©n/hiá»‡n khi chá»n nhiá»u) -->
<materialDesign:Card x:Name="batchActionsBar" 
                     Visibility="Collapsed"
                     Background="#FFF3E5"
                     Padding="10" Margin="0,0,0,10">
    <StackPanel Orientation="Horizontal">
        <TextBlock x:Name="txtSelectedCount" 
                   Text="ÄÃ£ chá»n: 0 vÄƒn báº£n" 
                   VerticalAlignment="Center" 
                   FontWeight="Bold" 
                   Margin="0,0,20,0"/>
        
        <Button Content="ğŸ“ Di chuyá»ƒn" Click="BatchMove_Click"/>
        <Button Content="ğŸ·ï¸ Gáº¯n tag" Click="BatchTag_Click"/>
        <Button Content="ğŸ“¥ Export" Click="BatchExport_Click"/>
        <Button Content="ğŸ—‘ï¸ XÃ³a" Click="BatchDelete_Click" Foreground="Red"/>
        
        <Button Content="âœ– Bá» chá»n" 
                Click="BatchClear_Click" 
                Margin="20,0,0,0"/>
    </StackPanel>
</materialDesign:Card>
```

---

### 3. **Smart Tags - Tag thÃ´ng minh** ğŸ¯

**TÃ­nh nÄƒng:**
- Gáº¯n nhiá»u tag cho má»—i vÄƒn báº£n (giá»‘ng Photo Album)
- TÃ¬m kiáº¿m theo tag
- Tag suggestions khi nháº­p
- Tag colors Ä‘á»ƒ phÃ¢n loáº¡i

**VÃ­ dá»¥ tags:**
- `#cáº¥p-bÃ¡ch` (Ä‘á»)
- `#máº­t` (vÃ ng)
- `#quan-trá»ng` (cam)
- `#ná»™i-bá»™` (xanh)
- `#Ä‘Ã£-xá»­-lÃ½` (xÃ¡m)

**Database Model:**

```csharp
public class DocumentTag
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Color { get; set; }
    public int UseCount { get; set; } // Sá»‘ láº§n sá»­ dá»¥ng
}

public class Document
{
    // ... existing fields ...
    public List<string> Tags { get; set; } = new();
}
```

---

### 4. **Advanced Search - TÃ¬m kiáº¿m nÃ¢ng cao** ğŸ”

**Giao diá»‡n Ä‘á» xuáº¥t:**

```xml
<Expander Header="ğŸ” TÃ¬m kiáº¿m nÃ¢ng cao" Margin="0,0,0,10">
    <StackPanel Margin="10">
        <!-- TÃ¬m theo sá»‘ vÄƒn báº£n -->
        <TextBox materialDesign:HintAssist.Hint="Sá»‘ vÄƒn báº£n"/>
        
        <!-- TÃ¬m theo tiÃªu Ä‘á» -->
        <TextBox materialDesign:HintAssist.Hint="TiÃªu Ä‘á»"/>
        
        <!-- TÃ¬m theo cÆ¡ quan -->
        <TextBox materialDesign:HintAssist.Hint="CÆ¡ quan ban hÃ nh"/>
        
        <!-- Khoáº£ng thá»i gian -->
        <DatePicker materialDesign:HintAssist.Hint="Tá»« ngÃ y"/>
        <DatePicker materialDesign:HintAssist.Hint="Äáº¿n ngÃ y"/>
        
        <!-- Tags -->
        <ComboBox materialDesign:HintAssist.Hint="Tags" 
                  IsEditable="True" 
                  SelectionMode="Multiple"/>
        
        <!-- Buttons -->
        <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
            <Button Content="ğŸ” TÃ¬m kiáº¿m"/>
            <Button Content="ğŸ”„ Reset"/>
        </StackPanel>
    </StackPanel>
</Expander>
```

---

### 5. **Document Templates - Máº«u vÄƒn báº£n** ğŸ“‹

**ÄÃ£ cÃ³ Model nhÆ°ng chÆ°a integrate vÃ o UI**

**TÃ­nh nÄƒng cáº§n thÃªm:**
- Táº¡o vÄƒn báº£n tá»« template nhanh
- Quáº£n lÃ½ templates (thÃªm/sá»­a/xÃ³a)
- Templates cÃ³ sáºµn cho cÃ¡c loáº¡i vÄƒn báº£n phá»• biáº¿n
- Preview template trÆ°á»›c khi táº¡o

**UI Ä‘á» xuáº¥t:**

```xml
<!-- ThÃªm nÃºt "Táº¡o tá»« máº«u" vÃ o toolbar -->
<Button Style="{StaticResource MaterialDesignRaisedButton}"
        Click="CreateFromTemplate_Click">
    <StackPanel Orientation="Horizontal">
        <materialDesign:PackIcon Kind="FileDocument" Margin="0,0,5,0"/>
        <TextBlock Text="Táº¡o tá»« máº«u"/>
    </StackPanel>
</Button>
```

---

### 6. **Quick Stats - Thá»‘ng kÃª nhanh** ğŸ“Š

**Dashboard mini phÃ­a trÃªn DataGrid:**

```xml
<StackPanel Orientation="Horizontal" Margin="0,0,0,10">
    <!-- Tá»•ng sá»‘ vÄƒn báº£n -->
    <materialDesign:Card Padding="15" Margin="0,0,10,0">
        <StackPanel>
            <TextBlock Text="Tá»•ng sá»‘" FontSize="11" Foreground="Gray"/>
            <TextBlock Text="248" FontSize="24" FontWeight="Bold"/>
        </StackPanel>
    </materialDesign:Card>
    
    <!-- ThÃ¡ng nÃ y -->
    <materialDesign:Card Padding="15" Margin="0,0,10,0">
        <StackPanel>
            <TextBlock Text="ThÃ¡ng nÃ y" FontSize="11" Foreground="Gray"/>
            <TextBlock Text="12" FontSize="24" FontWeight="Bold" Foreground="Green"/>
        </StackPanel>
    </materialDesign:Card>
    
    <!-- ChÆ°a xá»­ lÃ½ -->
    <materialDesign:Card Padding="15" Margin="0,0,10,0">
        <StackPanel>
            <TextBlock Text="ChÆ°a xá»­ lÃ½" FontSize="11" Foreground="Gray"/>
            <TextBlock Text="5" FontSize="24" FontWeight="Bold" Foreground="Orange"/>
        </StackPanel>
    </materialDesign:Card>
    
    <!-- QuÃ¡ háº¡n -->
    <materialDesign:Card Padding="15">
        <StackPanel>
            <TextBlock Text="QuÃ¡ háº¡n" FontSize="11" Foreground="Gray"/>
            <TextBlock Text="2" FontSize="24" FontWeight="Bold" Foreground="Red"/>
        </StackPanel>
    </materialDesign:Card>
</StackPanel>
```

---

### 7. **Document Attachments - File Ä‘Ã­nh kÃ¨m** ğŸ“

**Model cáº§n update:**

```csharp
public class Document
{
    // ... existing fields ...
    
    public List<DocumentAttachment> Attachments { get; set; } = new();
}

public class DocumentAttachment
{
    public string Id { get; set; }
    public string FileName { get; set; }
    public string FilePath { get; set; }
    public long FileSize { get; set; }
    public DateTime UploadDate { get; set; }
}
```

**UI trong DocumentEditDialog:**

```xml
<!-- Attachments Section -->
<TextBlock Text="ğŸ“ File Ä‘Ã­nh kÃ¨m" FontWeight="Bold" Margin="0,10,0,5"/>
<ListView x:Name="lvAttachments" Height="150">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <materialDesign:PackIcon Kind="FileDocument" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding FileName}" Margin="10,0"/>
                <TextBlock Text="{Binding FileSize, StringFormat='{0:N0} KB'}" 
                          Foreground="Gray" Margin="10,0"/>
                <Button ToolTip="XÃ³a" Click="RemoveAttachment_Click">
                    <materialDesign:PackIcon Kind="Delete" Foreground="Red"/>
                </Button>
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView>

<Button Content="â• ThÃªm file" Click="AddAttachment_Click"/>
```

---

### 8. **Document History - Lá»‹ch sá»­ thay Ä‘á»•i** ğŸ“œ

**Tracking má»i thay Ä‘á»•i:**

```csharp
public class DocumentHistory
{
    public string Id { get; set; }
    public string DocumentId { get; set; }
    public string Action { get; set; } // Created, Updated, Moved, Tagged
    public string User { get; set; }
    public DateTime Timestamp { get; set; }
    public string Details { get; set; } // JSON of changes
}
```

**UI trong DocumentViewDialog:**

```xml
<TabControl>
    <TabItem Header="Chi tiáº¿t">
        <!-- Document details -->
    </TabItem>
    
    <TabItem Header="Lá»‹ch sá»­">
        <ListView ItemsSource="{Binding History}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="0,5">
                        <TextBlock FontWeight="Bold">
                            <Run Text="{Binding User}"/>
                            <Run Text="{Binding Action}"/>
                        </TextBlock>
                        <TextBlock Text="{Binding Timestamp, StringFormat='dd/MM/yyyy HH:mm'}" 
                                  FontSize="11" Foreground="Gray"/>
                        <TextBlock Text="{Binding Details}" 
                                  Margin="10,0,0,0"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </TabItem>
</TabControl>
```

---

### 9. **Export/Import - Xuáº¥t nháº­p dá»¯ liá»‡u** ğŸ’¾

**Export:**
- Export to Excel (toÃ n bá»™ hoáº·c filtered)
- Export to PDF (bÃ¡o cÃ¡o danh sÃ¡ch)
- Export metadata (JSON/XML)

**Import:**
- Import tá»« Excel (bulk create)
- Import tá»« file system (scan folder)
- Import tá»« email (drag PDF tá»« Outlook)

---

### 10. **Recent Documents - VÄƒn báº£n gáº§n Ä‘Ã¢y** ğŸ•’

**Quick access panel:**

```xml
<Expander Header="â° Gáº§n Ä‘Ã¢y" IsExpanded="True">
    <ListView x:Name="lvRecent" Height="200">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Title}" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Number}" 
                              Foreground="Gray" 
                              Margin="10,0"/>
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Expander>
```

---

## ğŸ¯ ROADMAP IMPLEMENTATION - Káº¾ HOáº CH TRIá»‚N KHAI

### ğŸ“… PHASE 1: CORE FOUNDATION (Tuáº§n 1-2) - Cá»T LÃ•I

**Má»¥c tiÃªu:** Táº¡o ná»n táº£ng vá»¯ng cháº¯c vá»›i cáº¥u trÃºc thÆ° má»¥c chuáº©n

#### Task 1.1: Organization Setup Wizard
- [ ] Táº¡o `OrganizationSetupDialog.xaml` vá»›i wizard 3 bÆ°á»›c
- [ ] Implement `OrganizationSetupService` vá»›i method `CreateFolderStructure()`
- [ ] Tá»± Ä‘á»™ng táº¡o 11 folder chÃ­nh + sub-folders
- [ ] LÆ°u Organization info vÃ o database

#### Task 1.2: Folder Management
- [ ] Update `Folder` model vá»›i `OrganizationName`, `Icon`, `Color`, `SortOrder`
- [ ] Implement `LoadFolders()` vá»›i hierarchical structure
- [ ] Right-click menu trÃªn TreeView: Táº¡o má»›i, Äá»•i tÃªn, XÃ³a, Thuá»™c tÃ­nh
- [ ] Drag-drop vÄƒn báº£n vÃ o folder

#### Task 1.3: Database Schema Updates
```sql
-- ThÃªm vÃ o Document table
ALTER TABLE Document ADD COLUMN Status TEXT DEFAULT 'Draft';
ALTER TABLE Document ADD COLUMN CreatedBy TEXT;
ALTER TABLE Document ADD COLUMN ApprovedBy TEXT;
ALTER TABLE Document ADD COLUMN ApprovedDate TEXT;
ALTER TABLE Document ADD COLUMN SignedBy TEXT;
ALTER TABLE Document ADD COLUMN SignedDate TEXT;
ALTER TABLE Document ADD COLUMN PublishedBy TEXT;
ALTER TABLE Document ADD COLUMN PublishedDate TEXT;
ALTER TABLE Document ADD COLUMN Department TEXT;
ALTER TABLE Document ADD COLUMN IsPublic INTEGER DEFAULT 0;
ALTER TABLE Document ADD COLUMN Tags TEXT; -- JSON array

-- ThÃªm vÃ o Folder table
ALTER TABLE Folder ADD COLUMN OrganizationName TEXT;
ALTER TABLE Folder ADD COLUMN Icon TEXT DEFAULT 'ğŸ“‚';
ALTER TABLE Folder ADD COLUMN Color TEXT DEFAULT '#1976D2';
ALTER TABLE Folder ADD COLUMN SortOrder INTEGER DEFAULT 0;

-- Táº¡o WorkflowComment table
CREATE TABLE WorkflowComment (
    Id TEXT PRIMARY KEY,
    DocumentId TEXT NOT NULL,
    UserId TEXT NOT NULL,
    UserName TEXT NOT NULL,
    Timestamp TEXT NOT NULL,
    Action TEXT NOT NULL,
    Comment TEXT,
    FOREIGN KEY(DocumentId) REFERENCES Document(Id)
);

-- Táº¡o User table (náº¿u chÆ°a cÃ³)
CREATE TABLE User (
    Id TEXT PRIMARY KEY,
    Name TEXT NOT NULL,
    Email TEXT,
    Department TEXT NOT NULL,
    Role TEXT NOT NULL,
    CreatedDate TEXT NOT NULL
);
```

**Deliverables:**
- âœ… Cáº¥u trÃºc thÆ° má»¥c chuáº©n tá»± Ä‘á»™ng
- âœ… TreeView hoÃ n chá»‰nh vá»›i icons, colors
- âœ… Database schema Ä‘áº§y Ä‘á»§
- âœ… Basic folder operations

---

### ğŸ“… PHASE 2: WORKFLOW & PERMISSIONS (Tuáº§n 3-4) - PHÃ‚N QUYá»€N

**Má»¥c tiÃªu:** Workflow vÄƒn báº£n Ä‘i + PhÃ¢n quyá»n phÃ²ng ban

#### Task 2.1: User & Permission System
- [ ] Táº¡o `UserManagementDialog.xaml` - Quáº£n lÃ½ user
- [ ] Implement `PermissionService` vá»›i methods: `CanView()`, `CanEdit()`, `CanDelete()`
- [ ] Login dialog (simple - chá»‰ chá»n user tá»« list)
- [ ] Current user indicator trÃªn UI

#### Task 2.2: Document Workflow
- [ ] Update `DocumentEditDialog` vá»›i status dropdown
- [ ] Action buttons theo status: TrÃ¬nh kÃ½, PhÃª duyá»‡t, Tá»« chá»‘i, KÃ½, PhÃ¡t hÃ nh
- [ ] `WorkflowHistoryDialog` - Hiá»ƒn thá»‹ lá»‹ch sá»­ workflow
- [ ] Notification khi vÄƒn báº£n chuyá»ƒn status (optional)

#### Task 2.3: Department Filter
- [ ] ThÃªm Department ComboBox vÃ o toolbar
- [ ] Filter documents theo department cá»§a current user
- [ ] Color-code vÄƒn báº£n theo department
- [ ] Department badge trong DataGrid

**Deliverables:**
- âœ… Workflow vÄƒn báº£n Ä‘i hoÃ n chá»‰nh (7 status)
- âœ… PhÃ¢n quyá»n theo User Role
- âœ… Department management
- âœ… Workflow history tracking

---

### ğŸ“… PHASE 3: ADVANCED FEATURES (Tuáº§n 5-6) - TÃNH NÄ‚NG NÃ‚NG CAO

**Má»¥c tiÃªu:** TÃ¬m kiáº¿m nÃ¢ng cao + Batch operations + Sá»• vÄƒn báº£n

#### Task 3.1: Advanced Search
- [ ] Táº¡o `AdvancedSearchPanel` vá»›i Expander
- [ ] Multi-field search: Number, Title, Issuer, Type, Date range, Department, Status, Tags
- [ ] Saved searches (optional)
- [ ] Export search results to Excel

#### Task 3.2: Batch Operations
- [ ] DataGrid SelectionMode = Extended
- [ ] Batch actions bar: Move, Tag, Delete, Export
- [ ] Selected count indicator
- [ ] Confirm dialog trÆ°á»›c khi batch delete

#### Task 3.3: Document Registry (Sá»• vÄƒn báº£n)
- [ ] Táº¡o `DocumentRegistryPage.xaml` vá»›i TabControl
- [ ] Tab "Sá»• vÄƒn báº£n Ä‘i" - Outgoing documents
- [ ] Tab "Sá»• vÄƒn báº£n Ä‘áº¿n" - Incoming documents
- [ ] Export to Excel vá»›i format chuáº©n
- [ ] Print preview (optional)

**Deliverables:**
- âœ… Advanced search vá»›i 8+ fields
- âœ… Batch operations (move, tag, delete)
- âœ… Sá»• vÄƒn báº£n Ä‘i/Ä‘áº¿n
- âœ… Excel export

---

### ğŸ“… PHASE 4: TEMPLATES & INTEGRATION (Tuáº§n 7-8) - TÃCH Há»¢P

**Má»¥c tiÃªu:** Máº«u vÄƒn báº£n + TÃ­ch há»£p vá»›i Album áº£nh

#### Task 4.1: Document Templates
- [ ] Táº¡o `TemplateManagementPage.xaml`
- [ ] Upload .docx templates
- [ ] Create document from template (open in Word)
- [ ] Template variables: `{{SO_VAN_BAN}}`, `{{NGAY_THANG}}`, etc.
- [ ] Pre-populated templates cho cÃ¡c loáº¡i vÄƒn báº£n phá»• biáº¿n

#### Task 4.2: Album áº¢nh Integration
- [ ] Link Album áº£nh vÃ o folder "06. ALBUM áº¢NH"
- [ ] ThÃªm Album tab trong `DocumentViewDialog`
- [ ] Attach photos to documents
- [ ] Photo gallery trong document view

#### Task 4.3: Attachments
- [ ] Upload files Ä‘Ã­nh kÃ¨m (PDF, Word, Excel, Image)
- [ ] File preview trong dialog
- [ ] Download attachments
- [ ] File size limit & validation

**Deliverables:**
- âœ… Template system hoÃ n chá»‰nh
- âœ… TÃ­ch há»£p Album áº£nh
- âœ… File attachments
- âœ… Template variables

---

### ğŸ“… PHASE 5: REPORTING & POLISH (Tuáº§n 9-10) - BÃO CÃO & HOÃ€N THIá»†N

**Má»¥c tiÃªu:** Dashboard + Reports + UI/UX polish

#### Task 5.1: Dashboard & Statistics
- [ ] Quick stats cards: Tá»•ng sá»‘, ThÃ¡ng nÃ y, ChÆ°a xá»­ lÃ½, QuÃ¡ háº¡n
- [ ] Chart: VÄƒn báº£n theo thÃ¡ng (Line chart)
- [ ] Chart: VÄƒn báº£n theo loáº¡i (Pie chart)
- [ ] Chart: VÄƒn báº£n theo phÃ²ng ban (Bar chart)

#### Task 5.2: Reports
- [ ] BÃ¡o cÃ¡o Ä‘á»‹nh ká»³: Tuáº§n, ThÃ¡ng, QuÃ½, NÄƒm
- [ ] BÃ¡o cÃ¡o theo lÄ©nh vá»±c
- [ ] BÃ¡o cÃ¡o workflow (bao nhiÃªu vÄƒn báº£n pending)
- [ ] Export reports to PDF/Excel

#### Task 5.3: UI/UX Polish
- [ ] Animations (fade in/out, slide)
- [ ] Loading indicators
- [ ] Empty states vá»›i friendly messages
- [ ] Keyboard shortcuts (Ctrl+F = search, Ctrl+N = new doc)
- [ ] Tooltips vá»›i hÆ°á»›ng dáº«n
- [ ] Theme switcher (Light/Dark mode - optional)

#### Task 5.4: Testing & Bug Fixes
- [ ] Test all workflows
- [ ] Test permissions vá»›i different users
- [ ] Test large datasets (1000+ documents)
- [ ] Performance optimization
- [ ] Bug fixes from user feedback

**Deliverables:**
- âœ… Dashboard vá»›i charts
- âœ… Reports module
- âœ… Polished UI/UX
- âœ… Production-ready app

---

## ğŸ› ï¸ TECHNICAL STACK & TOOLS

### Core Technologies
- **Framework:** .NET 9.0, WPF
- **UI:** Material Design 5.3.0
- **Database:** LiteDB 5.0.21 (embedded)
- **Charts:** LiveCharts2 hoáº·c OxyPlot
- **Excel:** ClosedXML
- **PDF:** iTextSharp hoáº·c QuestPDF
- **Word:** DocX (Xceed)

### Recommended NuGet Packages
```xml
<PackageReference Include="MaterialDesignThemes" Version="5.3.0" />
<PackageReference Include="MaterialDesignColors" Version="3.3.0" />
<PackageReference Include="LiteDB" Version="5.0.21" />
<PackageReference Include="ClosedXML" Version="0.104.1" />
<PackageReference Include="LiveChartsCore.SkiaSharpView.WPF" Version="2.0.0-rc3.3" />
<PackageReference Include="Xceed.Words.NET" Version="1.11.0" />
<PackageReference Include="QuestPDF" Version="2024.12.3" />
```

---

## ğŸ“ CODE SAMPLES - MáºªU CODE QUAN TRá»ŒNG

### 1. Auto-Create Folder Structure

```csharp
public class OrganizationSetupService
{
    private readonly DocumentService _documentService;
    
    public OrganizationSetupService(DocumentService documentService)
    {
        _documentService = documentService;
    }
    
    public void CreateDefaultStructure(string orgName, OrganizationType orgType)
    {
        Console.WriteLine($"Creating folder structure for: {orgName} ({orgType})");
        
        // 1. VÄƒn báº£n phÃ¡p luáº­t
        var plFolder = CreateFolder("01. VÄ‚N Báº¢N PHÃP LUáº¬T", null, "âš–ï¸");
        CreateSubFolders(plFolder.Id, new[]
        {
            ("Hiáº¿n phÃ¡p", "ğŸ“œ"),
            ("Luáº­t", "ğŸ“•"),
            ("PhÃ¡p lá»‡nh", "ğŸ“˜"),
            ("Nghá»‹ quyáº¿t (Quá»‘c há»™i, HÄND)", "ğŸ“—"),
            ("Nghá»‹ Ä‘á»‹nh (ChÃ­nh phá»§)", "ğŸ“™"),
            ("ThÃ´ng tÆ° (Bá»™, ngÃ nh)", "ğŸ“‘"),
            ("Quyáº¿t Ä‘á»‹nh (UBND cÃ¡c cáº¥p)", "ğŸ“‹"),
            ("Chá»‰ thá»‹", "ğŸ“Œ"),
            ("HÆ°á»›ng dáº«n, Quy Ä‘á»‹nh", "ğŸ“")
        });
        
        // 2. VÄƒn báº£n Ä‘i
        var vbDiFolder = CreateFolder("02. VÄ‚N Báº¢N ÄI", null, "ğŸ“¤");
        CreateYearFolders(vbDiFolder.Id, new[]
        {
            "CÃ´ng vÄƒn Ä‘i",
            "Quyáº¿t Ä‘á»‹nh",
            "ThÃ´ng bÃ¡o",
            "BÃ¡o cÃ¡o (gá»­i cáº¥p trÃªn)",
            "Tá» trÃ¬nh",
            "Káº¿ hoáº¡ch"
        });
        
        // 3. VÄƒn báº£n Ä‘áº¿n
        var vbDenFolder = CreateFolder("03. VÄ‚N Báº¢N Äáº¾N", null, "ğŸ“¥");
        CreateYearFolders(vbDenFolder.Id, new[]
        {
            "Tá»« Trung Æ°Æ¡ng (ChÃ­nh phá»§, Bá»™)",
            "Tá»« cáº¥p Tá»‰nh (UBND, Sá»Ÿ)",
            "Tá»« cáº¥p Huyá»‡n (UBND, PhÃ²ng)",
            "Tá»« cÃ¡c xÃ£/phÆ°á»ng",
            "Tá»« tá»• chá»©c, cÃ¡ nhÃ¢n"
        });
        
        // ... Continue for all 11 main folders
        
        Console.WriteLine("âœ… Folder structure created successfully!");
    }
    
    private Folder CreateFolder(string name, string? parentId, string icon = "ğŸ“‚")
    {
        var folder = new Folder
        {
            Id = Guid.NewGuid().ToString(),
            Name = name,
            ParentId = parentId,
            Icon = icon,
            CreatedDate = DateTime.Now
        };
        
        _documentService.CreateFolder(folder);
        return folder;
    }
    
    private void CreateSubFolders(string parentId, (string name, string icon)[] folders)
    {
        foreach (var (name, icon) in folders)
        {
            CreateFolder(name, parentId, icon);
        }
    }
    
    private void CreateYearFolders(string parentId, string[] subFolders)
    {
        for (int year = 2024; year <= DateTime.Now.Year; year++)
        {
            var yearFolder = CreateFolder($"[NÄƒm {year}]", parentId, "ğŸ“…");
            CreateSubFolders(yearFolder.Id, 
                subFolders.Select(f => (f, "ğŸ“‚")).ToArray());
        }
    }
}
```

### 2. Workflow State Machine

```csharp
public class DocumentWorkflowService
{
    private readonly DocumentService _documentService;
    private readonly User _currentUser;
    
    public async Task<bool> SubmitForApproval(string documentId, string comment)
    {
        var doc = _documentService.GetDocument(documentId);
        if (doc == null) return false;
        
        // Validate transition
        if (doc.Status != DocumentStatus.Draft)
        {
            throw new InvalidOperationException("Chá»‰ vÄƒn báº£n nhÃ¡p má»›i cÃ³ thá»ƒ trÃ¬nh kÃ½!");
        }
        
        if (doc.CreatedBy != _currentUser.Id)
        {
            throw new UnauthorizedAccessException("Báº¡n khÃ´ng pháº£i ngÆ°á»i táº¡o vÄƒn báº£n nÃ y!");
        }
        
        // Update status
        doc.Status = DocumentStatus.PendingApproval;
        doc.Comments.Add(new WorkflowComment
        {
            Id = Guid.NewGuid().ToString(),
            UserId = _currentUser.Id,
            UserName = _currentUser.Name,
            Timestamp = DateTime.Now,
            Action = "TrÃ¬nh kÃ½",
            Comment = comment
        });
        
        _documentService.UpdateDocument(doc);
        
        // TODO: Send notification to leader
        await NotifyLeader(doc);
        
        return true;
    }
    
    public async Task<bool> Approve(string documentId, string comment)
    {
        var doc = _documentService.GetDocument(documentId);
        if (doc == null) return false;
        
        // Validate permission
        if (_currentUser.Role != UserRole.Leader && _currentUser.Role != UserRole.Admin)
        {
            throw new UnauthorizedAccessException("Báº¡n khÃ´ng cÃ³ quyá»n phÃª duyá»‡t!");
        }
        
        // Validate transition
        if (doc.Status != DocumentStatus.PendingApproval)
        {
            throw new InvalidOperationException("VÄƒn báº£n khÃ´ng á»Ÿ tráº¡ng thÃ¡i chá» duyá»‡t!");
        }
        
        // Update status
        doc.Status = DocumentStatus.Approved;
        doc.ApprovedBy = _currentUser.Id;
        doc.ApprovedDate = DateTime.Now;
        doc.Comments.Add(new WorkflowComment
        {
            Id = Guid.NewGuid().ToString(),
            UserId = _currentUser.Id,
            UserName = _currentUser.Name,
            Timestamp = DateTime.Now,
            Action = "PhÃª duyá»‡t",
            Comment = comment
        });
        
        _documentService.UpdateDocument(doc);
        
        // Notify admin for signature
        await NotifyAdmin(doc);
        
        return true;
    }
    
    public async Task<bool> Reject(string documentId, string reason)
    {
        var doc = _documentService.GetDocument(documentId);
        if (doc == null) return false;
        
        // Validate permission
        if (_currentUser.Role != UserRole.Leader && _currentUser.Role != UserRole.Admin)
        {
            throw new UnauthorizedAccessException("Báº¡n khÃ´ng cÃ³ quyá»n tá»« chá»‘i!");
        }
        
        // Revert to Draft
        doc.Status = DocumentStatus.Draft;
        doc.Comments.Add(new WorkflowComment
        {
            Id = Guid.NewGuid().ToString(),
            UserId = _currentUser.Id,
            UserName = _currentUser.Name,
            Timestamp = DateTime.Now,
            Action = "Tá»« chá»‘i",
            Comment = reason
        });
        
        _documentService.UpdateDocument(doc);
        
        // Notify creator
        await NotifyCreator(doc, reason);
        
        return true;
    }
    
    // Similar methods for Sign(), Publish(), etc...
}
```

---

## ğŸ“ Há»ŒC Tá»ª PHOTO ALBUM

**Patterns Ä‘Ã£ implement thÃ nh cÃ´ng trong PhotoAlbumPageNew:**

### 1. TreeView Management
```csharp
// âœ… ÄÃ£ cÃ³ trong PhotoAlbumPageNew - Ãp dá»¥ng cho DocumentListPage
private void LoadAlbumTree(bool preserveSelection = false)
{
    var currentAlbumId = preserveSelection ? _selectedAlbumNode?.Id : null;
    
    var rootNode = BuildAlbumTree();
    albumTree.Items.Clear();
    albumTree.Items.Add(rootNode);
    
    if (preserveSelection && !string.IsNullOrEmpty(currentAlbumId))
    {
        Dispatcher.BeginInvoke(() =>
        {
            try
            {
                var nodeToSelect = FindNodeById(rootNode, currentAlbumId);
                if (nodeToSelect != null)
                {
                    ExpandToNode(rootNode, currentAlbumId);
                    _selectedAlbumNode = nodeToSelect;
                    UpdateButtonStates();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error restoring selection: {ex.Message}");
            }
        }, DispatcherPriority.Loaded);
    }
}
```

### 2. Actual Count from Database
```csharp
// âœ… Get real-time count - KhÃ´ng dÃ¹ng cached value
PhotoCount = _documentService.GetPhotosByAlbum(album.Id).Count
```

### 3. ErrorDialog Pattern
```csharp
// âœ… User-friendly error handling
try
{
    // ... operation
}
catch (Exception ex)
{
    ErrorDialog.Show(this, "Lá»—i thao tÃ¡c", ex);
}
```

### 4. Batch Operations UI
```csharp
// âœ… Selection mode toggle
private void ToggleSelectionMode()
{
    _isSelectionMode = !_isSelectionMode;
    batchActionsBar.Visibility = _isSelectionMode ? Visibility.Visible : Visibility.Collapsed;
    btnSelectMode.Content = _isSelectionMode ? "âœ– ThoÃ¡t cháº¿ Ä‘á»™ chá»n" : "â˜‘ï¸ Chá»n nhiá»u";
}
```

---

## âœ… DELIVERABLES - Sáº¢N PHáº¨M CUá»I CÃ™NG

### Chá»©c nÄƒng hoÃ n chá»‰nh:
1. âœ… **11 thÆ° má»¥c chuáº©n** - Tá»± Ä‘á»™ng táº¡o theo loáº¡i cÆ¡ quan
2. âœ… **Workflow vÄƒn báº£n Ä‘i** - 7 tráº¡ng thÃ¡i tá»« nhÃ¡p â†’ phÃ¡t hÃ nh
3. âœ… **PhÃ¢n quyá»n phÃ²ng ban** - 4 user roles, 7 departments
4. âœ… **Sá»• vÄƒn báº£n Ä‘i/Ä‘áº¿n** - Export Excel
5. âœ… **TÃ¬m kiáº¿m nÃ¢ng cao** - 8+ search fields
6. âœ… **Batch operations** - Move, tag, delete nhiá»u vÄƒn báº£n
7. âœ… **Templates** - Táº¡o vÄƒn báº£n tá»« máº«u
8. âœ… **Album áº£nh tÃ­ch há»£p** - Link vá»›i PhotoAlbumPageNew
9. âœ… **Dashboard** - Thá»‘ng kÃª, biá»ƒu Ä‘á»“
10. âœ… **Reports** - BÃ¡o cÃ¡o Ä‘á»‹nh ká»³

### UI/UX:
- âœ… Material Design consistent
- âœ… Responsive layout
- âœ… Keyboard shortcuts
- âœ… Empty states
- âœ… Loading indicators
- âœ… Error handling vá»›i ErrorDialog

### Performance:
- âœ… Handle 1000+ documents
- âœ… Fast search vá»›i indexing
- âœ… Lazy loading cho TreeView
- âœ… Optimized database queries

---

**Last Updated:** 2026-02-05  
**Status:** ğŸ“‹ Document complete - Ready for Phase 1 implementation  
**Next Action:** Báº¡n cÃ³ muá»‘n tÃ´i báº¯t Ä‘áº§u implement Phase 1 khÃ´ng?
