<Window x:Class="AIVanBan.Desktop.Views.AIComposeDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="AI Soáº¡n tháº£o vÄƒn báº£n" 
        Height="700" 
        Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        FontFamily="{DynamicResource MaterialDesignFont}">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="ðŸ¤– AI Soáº¡n tháº£o vÄƒn báº£n" 
                      Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                      Margin="0,0,0,5"/>
            <TextBlock Text="Nháº­p thÃ´ng tin Ä‘á»ƒ AI táº¡o ná»™i dung vÄƒn báº£n tá»± Ä‘á»™ng"
                      Style="{StaticResource MaterialDesignBody2TextBlock}"
                      Foreground="{DynamicResource MaterialDesignBodyLight}"/>
        </StackPanel>

        <!-- Template Selection -->
        <materialDesign:Card Grid.Row="1" Padding="16" Margin="0,0,0,16">
            <StackPanel>
                <TextBlock Text="ðŸ“ Chá»n máº«u vÄƒn báº£n" 
                          Style="{StaticResource MaterialDesignBody1TextBlock}"
                          FontWeight="SemiBold"
                          Margin="0,0,0,8"/>
                
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <ComboBox x:Name="TemplateComboBox"
                             Grid.Column="0"
                             materialDesign:HintAssist.Hint="Chá»n loáº¡i vÄƒn báº£n"
                             Style="{StaticResource MaterialDesignOutlinedComboBox}"
                             DisplayMemberPath="Name"
                             SelectionChanged="TemplateComboBox_SelectionChanged"
                             Margin="0,0,10,0"/>

                    <Button Grid.Column="1"
                           x:Name="ViewTemplateButton"
                           Content="Xem máº«u"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Click="ViewTemplate_Click"
                           IsEnabled="False"/>
                </Grid>

                <!-- Template Info -->
                <StackPanel x:Name="TemplateInfoPanel" 
                           Visibility="Collapsed"
                           Margin="0,12,0,0">
                    <TextBlock x:Name="TemplateDescription"
                              TextWrapping="Wrap"
                              Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                    
                    <TextBlock x:Name="RequiredFieldsText"
                              Margin="0,8,0,0"
                              TextWrapping="Wrap"
                              Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                </StackPanel>
            </StackPanel>
        </materialDesign:Card>

        <!-- ðŸŽ¯ Dá»¯ liá»‡u máº«u demo (ná»•i báº­t) -->
        <materialDesign:Card Grid.Row="2" Padding="12" Margin="0,0,0,12"
                             Background="#FFF3E0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" VerticalAlignment="Center" Margin="0,0,12,0">
                    <TextBlock Text="ðŸŽ¯ Dá»® LIá»†U MáºªU" FontWeight="Bold" FontSize="13" 
                              Foreground="#E65100"/>
                    <TextBlock Text="Chá»n máº«u â†’ Táº£i â†’ AI táº¡o vÄƒn báº£n" FontSize="11" 
                              Foreground="#BF360C"/>
                </StackPanel>

                <ComboBox x:Name="SampleScenarioComboBox"
                         Grid.Column="1"
                         materialDesign:HintAssist.Hint="Chá»n ká»‹ch báº£n máº«u (40 máº«u)"
                         Style="{StaticResource MaterialDesignOutlinedComboBox}"
                         SelectionChanged="SampleScenarioComboBox_SelectionChanged"
                         Margin="0,0,10,0"
                         MaxDropDownHeight="450"
                         FontSize="12">
                    <!-- â•â•â• CÃ”NG VÄ‚N (8 máº«u) â•â•â• -->
                    <ComboBoxItem Content="ðŸ“„ CV: Xin há»— trá»£ kinh phÃ­" Tag="cv_kinhi"/>
                    <ComboBoxItem Content="ðŸ“„ CV: BÃ¡o cÃ¡o tiáº¿n Ä‘á»™ NTM" Tag="cv_baocao"/>
                    <ComboBoxItem Content="ðŸ“„ CV: Tráº£ lá»i cÃ´ng vÄƒn" Tag="cv_traloi"/>
                    <ComboBoxItem Content="ðŸ“„ CV: Má»i há»p liÃªn ngÃ nh" Tag="cv_moihop"/>
                    <ComboBoxItem Content="ðŸ“„ CV: ÄÃ´n Ä‘á»‘c ná»™p thuáº¿" Tag="cv_dondoc"/>
                    <ComboBoxItem Content="ðŸ“„ CV: Xin chá»§ trÆ°Æ¡ng Ä‘áº§u tÆ°" Tag="cv_chutruong"/>
                    <ComboBoxItem Content="ðŸ“„ CV: Giá»›i thiá»‡u cÃ´ng dÃ¢n" Tag="cv_gioithieu"/>
                    <ComboBoxItem Content="ðŸ“„ CV: Phá»‘i há»£p xá»­ lÃ½ vi pháº¡m" Tag="cv_phoihop"/>
                    <!-- â•â•â• QUYáº¾T Äá»ŠNH (7 máº«u) â•â•â• -->
                    <ComboBoxItem Content="âš–ï¸ QÄ: Khen thÆ°á»Ÿng cÃ¡ nhÃ¢n" Tag="qd_khenthuong"/>
                    <ComboBoxItem Content="âš–ï¸ QÄ: Äiá»u Ä‘á»™ng cÃ¡n bá»™" Tag="qd_dieudonng"/>
                    <ComboBoxItem Content="âš–ï¸ QÄ: ThÃ nh láº­p ban chá»‰ Ä‘áº¡o" Tag="qd_thanhlap"/>
                    <ComboBoxItem Content="âš–ï¸ QÄ: PhÃª duyá»‡t dá»± Ã¡n" Tag="qd_pheduyet"/>
                    <ComboBoxItem Content="âš–ï¸ QÄ: Xá»­ pháº¡t vi pháº¡m HC" Tag="qd_xuphat"/>
                    <ComboBoxItem Content="âš–ï¸ QÄ: Cáº¥p Ä‘áº¥t á»Ÿ cho há»™ nghÃ¨o" Tag="qd_capdat"/>
                    <ComboBoxItem Content="âš–ï¸ QÄ: Ban hÃ nh quy cháº¿" Tag="qd_quiche"/>
                    <!-- â•â•â• BÃO CÃO (5 máº«u) â•â•â• -->
                    <ComboBoxItem Content="ðŸ“Š BC: Tá»•ng káº¿t nÄƒm" Tag="bc_tongket"/>
                    <ComboBoxItem Content="ðŸ“Š BC: TÃ¬nh hÃ¬nh an ninh thÃ¡ng" Tag="bc_tinhhinh"/>
                    <ComboBoxItem Content="ðŸ“Š BC: Káº¿t quáº£ cáº£i cÃ¡ch HC" Tag="bc_cchc"/>
                    <ComboBoxItem Content="ðŸ“Š BC: PhÃ²ng chá»‘ng thiÃªn tai" Tag="bc_thientai"/>
                    <ComboBoxItem Content="ðŸ“Š BC: CÃ´ng tÃ¡c dÃ¢n sá»‘ - KHHGÄ" Tag="bc_danso"/>
                    <!-- â•â•â• Tá»œ TRÃŒNH (5 máº«u) â•â•â• -->
                    <ComboBoxItem Content="ðŸ’¡ TT: Xin Ã½ kiáº¿n di dá»i chá»£" Tag="tt_yikien"/>
                    <ComboBoxItem Content="ðŸ’¡ TT: Äá» xuáº¥t xÃ¢y nhÃ  VH" Tag="tt_dexuat"/>
                    <ComboBoxItem Content="ðŸ’¡ TT: Bá»• sung biÃªn cháº¿" Tag="tt_bienche"/>
                    <ComboBoxItem Content="ðŸ’¡ TT: Xin kinh phÃ­ sá»­a trÆ°á»ng" Tag="tt_kinhphi"/>
                    <ComboBoxItem Content="ðŸ’¡ TT: PhÃª duyá»‡t Ä‘á»“ Ã¡n quy hoáº¡ch" Tag="tt_quyhoach"/>
                    <!-- â•â•â• Káº¾ HOáº CH (5 máº«u) â•â•â• -->
                    <ComboBoxItem Content="ðŸ“… KH: CÃ´ng tÃ¡c nÄƒm 2026" Tag="kh_congtac"/>
                    <ComboBoxItem Content="ðŸ“… KH: Tá»• chá»©c lá»… há»™i" Tag="kh_sukien"/>
                    <ComboBoxItem Content="ðŸ“… KH: PhÃ²ng chá»‘ng chÃ¡y ná»•" Tag="kh_pccc"/>
                    <ComboBoxItem Content="ðŸ“… KH: TuyÃªn truyá»n báº§u cá»­" Tag="kh_baucu"/>
                    <ComboBoxItem Content="ðŸ“… KH: Chuyá»ƒn Ä‘á»•i sá»‘ nÄƒm 2026" Tag="kh_chuyendoiso"/>
                    <!-- â•â•â• THÃ”NG BÃO (5 máº«u) â•â•â• -->
                    <ComboBoxItem Content="ðŸ“¢ TB: Há»p triá»ƒn khai quÃ½ I" Tag="tb_hop"/>
                    <ComboBoxItem Content="ðŸ“¢ TB: Káº¿t quáº£ cuá»™c há»p" Tag="tb_ketqua"/>
                    <ComboBoxItem Content="ðŸ“¢ TB: Lá»‹ch tiáº¿p cÃ´ng dÃ¢n" Tag="tb_tiepcongdan"/>
                    <ComboBoxItem Content="ðŸ“¢ TB: Tuyá»ƒn dá»¥ng cÃ´ng chá»©c" Tag="tb_tuyendung"/>
                    <ComboBoxItem Content="ðŸ“¢ TB: Nghá»‰ lá»… Quá»‘c khÃ¡nh" Tag="tb_nghile"/>
                    <!-- â•â•â• NGHá»Š QUYáº¾T (3 máº«u) â•â•â• -->
                    <ComboBoxItem Content="ðŸ“œ NQ: HÄND phÃª duyá»‡t ngÃ¢n sÃ¡ch" Tag="nq_hdnd"/>
                    <ComboBoxItem Content="ðŸ“œ NQ: UBND quáº£n lÃ½ karaoke" Tag="nq_ubnd"/>
                    <ComboBoxItem Content="ðŸ“œ NQ: ChuyÃªn Ä‘á» xÃ¢y dá»±ng NTM" Tag="nq_chuyende"/>
                    <!-- â•â•â• CHá»ˆ THá»Š (2 máº«u) â•â•â• -->
                    <ComboBoxItem Content="ðŸ”´ CT: TÄƒng cÆ°á»ng ANTT dá»‹p Táº¿t" Tag="ct_antt"/>
                    <ComboBoxItem Content="ðŸ”´ CT: PhÃ²ng chá»‘ng dá»‹ch bá»‡nh" Tag="ct_phongdich"/>
                </ComboBox>

                <Button Grid.Column="2"
                       x:Name="LoadSampleButton"
                       Style="{StaticResource MaterialDesignRaisedDarkButton}"
                       Click="LoadSample_Click"
                       IsEnabled="False"
                       Padding="16,8"
                       Height="40">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Download" Width="18" Height="18" 
                                                VerticalAlignment="Center" Margin="0,0,6,0"/>
                        <TextBlock Text="Táº£i máº«u" FontWeight="Bold" VerticalAlignment="Center"/>
                    </StackPanel>
                    <Button.ToolTip>
                        <ToolTip Content="Tá»± Ä‘á»™ng Ä‘iá»n dá»¯ liá»‡u máº«u cho ká»‹ch báº£n Ä‘Ã£ chá»n"/>
                    </Button.ToolTip>
                </Button>
            </Grid>
        </materialDesign:Card>

        <!-- Input Fields + Preview (combined scrollable area) -->
        <ScrollViewer Grid.Row="3" 
                     VerticalScrollBarVisibility="Auto"
                     Margin="0,0,0,12">
            <StackPanel>
                <!-- Dynamic input fields -->
                <StackPanel x:Name="InputFieldsPanel">
                    <!-- Dynamic fields will be added here -->
                </StackPanel>

                <!-- Generated Content Preview with Rich Text Editor -->
                <Expander x:Name="PreviewExpander"
                         Header="ðŸ“„ Ná»™i dung vÄƒn báº£n (cÃ³ thá»ƒ chá»‰nh sá»­a)"
                         IsExpanded="False"
                         Margin="0,8,0,0"
                         Visibility="Collapsed">
                    <materialDesign:Card Padding="0" Margin="0,8,0,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Rich Text Editor Toolbar -->
                            <ToolBar Grid.Row="0" Background="#F5F5F5" Padding="5">
                                <ComboBox x:Name="FontFamilyComboBox" 
                                         Width="130" 
                                         SelectionChanged="FontFamily_Changed"
                                         ToolTip="PhÃ´ng chá»¯">
                                    <ComboBoxItem Content="Times New Roman" IsSelected="True"/>
                                    <ComboBoxItem Content="Arial"/>
                                    <ComboBoxItem Content="Tahoma"/>
                                    <ComboBoxItem Content="Calibri"/>
                                </ComboBox>
                                
                                <ComboBox x:Name="FontSizeComboBox" 
                                         Width="60" 
                                         SelectionChanged="FontSize_Changed"
                                         ToolTip="Cá»¡ chá»¯">
                                    <ComboBoxItem Content="10"/>
                                    <ComboBoxItem Content="11"/>
                                    <ComboBoxItem Content="12"/>
                                    <ComboBoxItem Content="13"/>
                                    <ComboBoxItem Content="14" IsSelected="True"/>
                                    <ComboBoxItem Content="16"/>
                                    <ComboBoxItem Content="18"/>
                                    <ComboBoxItem Content="20"/>
                                </ComboBox>
                                
                                <Separator/>
                                
                                <Button x:Name="BoldButton" Click="Bold_Click" ToolTip="In Ä‘áº­m (Ctrl+B)" Padding="8,4">
                                    <TextBlock Text="B" FontWeight="Bold" FontSize="14"/>
                                </Button>
                                
                                <Button x:Name="ItalicButton" Click="Italic_Click" ToolTip="In nghiÃªng (Ctrl+I)" Padding="8,4">
                                    <TextBlock Text="I" FontStyle="Italic" FontSize="14"/>
                                </Button>
                                
                                <Button x:Name="UnderlineButton" Click="Underline_Click" ToolTip="Gáº¡ch chÃ¢n (Ctrl+U)" Padding="8,4">
                                    <TextBlock Text="U" TextDecorations="Underline" FontSize="14"/>
                                </Button>
                                
                                <Separator/>
                                
                                <Button x:Name="AlignLeftButton" Click="AlignLeft_Click" ToolTip="CÄƒn trÃ¡i" Padding="8,4">
                                    <materialDesign:PackIcon Kind="FormatAlignLeft" Width="16" Height="16"/>
                                </Button>
                                
                                <Button x:Name="AlignCenterButton" Click="AlignCenter_Click" ToolTip="CÄƒn giá»¯a" Padding="8,4">
                                    <materialDesign:PackIcon Kind="FormatAlignCenter" Width="16" Height="16"/>
                                </Button>
                                
                                <Button x:Name="AlignRightButton" Click="AlignRight_Click" ToolTip="CÄƒn pháº£i" Padding="8,4">
                                    <materialDesign:PackIcon Kind="FormatAlignRight" Width="16" Height="16"/>
                                </Button>
                                
                                <Button x:Name="AlignJustifyButton" Click="AlignJustify_Click" ToolTip="CÄƒn Ä‘á»u" Padding="8,4">
                                    <materialDesign:PackIcon Kind="FormatAlignJustify" Width="16" Height="16"/>
                                </Button>
                                
                                <Separator/>
                                
                                <Button x:Name="CopyButton" Click="Copy_Click" ToolTip="Copy ná»™i dung" Padding="8,4">
                                    <materialDesign:PackIcon Kind="ContentCopy" Width="16" Height="16"/>
                                </Button>
                                
                                <Button x:Name="ExportWordButton" Click="ExportWord_Click" ToolTip="Xuáº¥t ra Word (.docx)" Padding="8,4">
                                    <materialDesign:PackIcon Kind="MicrosoftWord" Width="16" Height="16"/>
                                </Button>
                                
                                <Button x:Name="PrintButton" Click="Print_Click" ToolTip="In vÄƒn báº£n" Padding="8,4">
                                    <materialDesign:PackIcon Kind="Printer" Width="16" Height="16"/>
                                </Button>
                            </ToolBar>
                            
                            <!-- RichTextBox for formatted content -->
                            <Border Grid.Row="1" 
                                   BorderBrush="#DDDDDD" 
                                   BorderThickness="1"
                                   Background="White"
                                   Margin="5"
                                   MaxHeight="500">
                                <ScrollViewer VerticalScrollBarVisibility="Visible" 
                                             HorizontalScrollBarVisibility="Disabled">
                                    <RichTextBox x:Name="GeneratedContentRichTextBox"
                                                Padding="20"
                                                FontFamily="Times New Roman"
                                                FontSize="14"
                                                AcceptsTab="True"
                                                AcceptsReturn="True"
                                                InputMethod.IsInputMethodEnabled="True"
                                                BorderThickness="0"/>
                                </ScrollViewer>
                            </Border>
                        </Grid>
                    </materialDesign:Card>
                </Expander>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
         <StackPanel Grid.Row="4" 
                 Orientation="Horizontal" 
                 HorizontalAlignment="Right">
            <Button x:Name="GenerateButton"
                   Content="âœ¨ Táº¡o vÄƒn báº£n vá»›i AI"
                   Style="{StaticResource MaterialDesignRaisedButton}"
                   Click="Generate_Click"
                   IsEnabled="False"
                   Margin="0,0,10,0">
                <Button.ToolTip>
                    <ToolTip Content="Sá»­ dá»¥ng AI Ä‘á»ƒ táº¡o ná»™i dung vÄƒn báº£n"/>
                </Button.ToolTip>
            </Button>

             <ProgressBar x:Name="LoadingProgress"
                   Style="{StaticResource MaterialDesignCircularProgressBar}"
                   Value="0"
                   IsIndeterminate="True"
                   Width="24"
                   Height="24"
                   Visibility="Collapsed"
                   Margin="0,0,10,0"/>

             <Button x:Name="SaveDocumentButton"
                 Content="ðŸ’¾ LÆ°u vÄƒn báº£n"
                 Style="{StaticResource MaterialDesignRaisedButton}"
                 Click="Save_Click"
                 IsEnabled="False"
                 Margin="0,0,10,0"/>

             <Button Content="Há»§y"
                 Style="{StaticResource MaterialDesignOutlinedButton}"
                 Click="Cancel_Click"/>
         </StackPanel>
    </Grid>
</Window>
