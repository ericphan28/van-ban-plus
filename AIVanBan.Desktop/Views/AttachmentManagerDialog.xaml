<Window x:Class="AIVanBan.Desktop.Views.AttachmentManagerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Quáº£n lÃ½ File Ä‘Ã­nh kÃ¨m" 
        Height="600" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5"
        ResizeMode="CanResize">
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="ðŸ“Ž QUáº¢N LÃ FILE ÄÃNH KÃˆM" 
                       FontSize="20" FontWeight="Bold" 
                       Foreground="#333"/>
            <TextBlock x:Name="txtDocumentInfo" 
                       Text="VÄƒn báº£n: [TÃªn vÄƒn báº£n]" 
                       FontSize="13" 
                       Foreground="#666"
                       Margin="0,5,0,0"/>
        </StackPanel>
        
        <!-- Upload Area -->
        <materialDesign:Card Grid.Row="1" Padding="20" Margin="0,0,0,15" Background="White">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Vertical">
                    <Button x:Name="btnUploadFiles"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Click="UploadFiles_Click"
                            Height="50"
                            Padding="20,0"
                            Background="#4CAF50"
                            BorderBrush="#4CAF50">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="FileUpload" VerticalAlignment="Center" Margin="0,0,8,0" Width="24" Height="24"/>
                            <TextBlock Text="ðŸ“¤ Chá»n nhiá»u file" FontSize="14" FontWeight="SemiBold"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Vertical" Margin="15,0,0,0">
                    <Button x:Name="btnSelectFromAlbum"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Click="SelectFromAlbum_Click"
                            Height="50"
                            Padding="20,0"
                            Background="#2196F3"
                            BorderBrush="#2196F3">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ImageMultiple" VerticalAlignment="Center" Margin="0,0,8,0" Width="24" Height="24"/>
                            <TextBlock Text="ðŸ–¼ï¸ Chá»n tá»« Album" FontSize="14" FontWeight="SemiBold"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
                
                <StackPanel Grid.Column="2" Margin="20,0,0,0" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ’¡ HÆ°á»›ng dáº«n:" FontWeight="SemiBold" FontSize="13" Foreground="#333" Margin="0,0,0,5"/>
                    <TextBlock FontSize="12" Foreground="#666" TextWrapping="Wrap">
                        <Run Text="â€¢ Chá»n nhiá»u file: Upload Word, PDF, Excel, PowerPoint, áº¢nh tá»« mÃ¡y tÃ­nh"/>
                        <LineBreak/>
                        <Run Text="â€¢ Chá»n tá»« Album: Láº¥y áº£nh tá»« thÆ° má»¥c quáº£n lÃ½ áº£nh cÃ³ sáºµn"/>
                    </TextBlock>
                </StackPanel>
            </Grid>
        </materialDesign:Card>
        
        <!-- File List -->
        <materialDesign:Card Grid.Row="2" Padding="15" Background="White">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" 
                           Text="ðŸ“‹ Danh sÃ¡ch file Ä‘Ã­nh kÃ¨m" 
                           FontWeight="SemiBold" 
                           FontSize="14" 
                           Margin="0,0,0,10"/>
                
                <!-- Empty State -->
                <StackPanel x:Name="emptyState" 
                            Grid.Row="1" 
                            VerticalAlignment="Center" 
                            HorizontalAlignment="Center"
                            Visibility="Collapsed">
                    <materialDesign:PackIcon Kind="FileUploadOutline" 
                                            Width="80" Height="80" 
                                            Foreground="#DDD"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="ChÆ°a cÃ³ file Ä‘Ã­nh kÃ¨m" 
                               FontSize="16" 
                               FontWeight="SemiBold"
                               Foreground="#666"
                               Margin="0,15,0,5"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Click nÃºt 'ðŸ“¤ Chá»n nhiá»u file' á»Ÿ trÃªn Ä‘á»ƒ thÃªm file" 
                               FontSize="13" 
                               Foreground="#999"
                               HorizontalAlignment="Center"/>
                </StackPanel>
                
                <!-- File DataGrid -->
                <DataGrid x:Name="dgAttachments" 
                          Grid.Row="1"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          SelectionMode="Single"
                          IsReadOnly="True"
                          GridLinesVisibility="Horizontal"
                          HorizontalGridLinesBrush="#EEEEEE"
                          RowHeight="50"
                          Background="White"
                          BorderThickness="0">
                    
                    <DataGrid.Columns>
                        <!-- Icon Column -->
                        <DataGridTemplateColumn Header="" Width="50">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <materialDesign:PackIcon Kind="{Binding IconKind}" 
                                                            Width="32" 
                                                            Height="32"
                                                            Foreground="{Binding IconColor}"
                                                            HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- File Name -->
                        <DataGridTextColumn Header="TÃªn file" Binding="{Binding FileName}" Width="2*" MinWidth="200">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                    <Setter Property="ToolTip" Value="{Binding FileName}"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        
                        <!-- File Size -->
                        <DataGridTextColumn Header="KÃ­ch thÆ°á»›c" Binding="{Binding FileSizeText}" Width="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Foreground" Value="#666"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        
                        <!-- Upload Date -->
                        <DataGridTextColumn Header="NgÃ y táº£i lÃªn" Binding="{Binding UploadedDate, StringFormat='dd/MM/yyyy HH:mm'}" Width="130">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Foreground" Value="#666"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        
                        <!-- Actions -->
                        <DataGridTemplateColumn Header="Thao tÃ¡c" Width="140">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <Button Style="{StaticResource MaterialDesignIconButton}"
                                                ToolTip="Má»Ÿ file" 
                                                Click="OpenFile_Click"
                                                Tag="{Binding Id}"
                                                Width="32" Height="32">
                                            <materialDesign:PackIcon Kind="OpenInNew" Width="18" Height="18"/>
                                        </Button>
                                        <Button Style="{StaticResource MaterialDesignIconButton}"
                                                ToolTip="Táº£i xuá»‘ng" 
                                                Click="DownloadFile_Click"
                                                Tag="{Binding Id}"
                                                Width="32" Height="32">
                                            <materialDesign:PackIcon Kind="Download" Width="18" Height="18"/>
                                        </Button>
                                        <Button Style="{StaticResource MaterialDesignIconButton}"
                                                ToolTip="XÃ³a" 
                                                Click="DeleteFile_Click"
                                                Tag="{Binding Id}"
                                                Width="32" Height="32"
                                                Foreground="#F44336">
                                            <materialDesign:PackIcon Kind="Delete" Width="18" Height="18"/>
                                        </Button>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </materialDesign:Card>
        
        <!-- Footer Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="ÄÃ³ng" 
                    Style="{StaticResource MaterialDesignFlatButton}"
                    Click="Close_Click"
                    MinWidth="100"/>
        </StackPanel>
    </Grid>
</Window>
