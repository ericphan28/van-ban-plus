<Window x:Class="AIVanBan.Desktop.Views.DocumentViewDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Xem văn bản" Height="680" Width="800"
        MinWidth="600" MinHeight="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip"
        Background="#F5F5F5">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- ===== HEADER BAR ===== -->
        <Border Grid.Row="0" Background="#1565C0" Padding="20,14">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock x:Name="txtHeaderNumber" 
                               FontSize="13" Foreground="#B3FFFFFF"
                               FontWeight="SemiBold"/>
                    <TextBlock x:Name="txtHeaderTitle" 
                               FontSize="17" Foreground="White" 
                               FontWeight="Bold"
                               TextWrapping="Wrap" MaxHeight="50"
                               TextTrimming="CharacterEllipsis"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <Border x:Name="badgeType" CornerRadius="12" Padding="10,4" 
                            Background="#BBDEFB" Margin="0,0,8,0">
                        <TextBlock x:Name="txtBadgeType" FontSize="11" FontWeight="SemiBold" 
                                   Foreground="#0D47A1"/>
                    </Border>
                    <Border x:Name="badgeDirection" CornerRadius="12" Padding="10,4"
                            Background="#C8E6C9">
                        <TextBlock x:Name="txtBadgeDirection" FontSize="11" FontWeight="SemiBold" 
                                   Foreground="#1B5E20"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ===== CONTENT AREA ===== -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="0">
            <StackPanel Margin="20,16,20,16">
                
                <!-- Card 1: THÔNG TIN CHUNG -->
                <Border Background="White" CornerRadius="8" Margin="0,0,0,12"
                        BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel>
                        <Border Background="#F5F5F5" CornerRadius="8,8,0,0" Padding="14,8">
                            <TextBlock Text="📋 THÔNG TIN CHUNG" FontSize="12" FontWeight="Bold" 
                                       Foreground="#424242"/>
                        </Border>
                        
                        <Grid Margin="14,10,14,14">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="120"/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="24"/>
                                <ColumnDefinition Width="Auto" MinWidth="120"/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Số văn bản:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtNumber" Grid.Row="0" Grid.Column="2" 
                                       FontSize="14" FontWeight="Bold" Foreground="#1565C0"
                                       VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="0" Grid.Column="4" Text="Ngày ban hành:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtIssueDate" Grid.Row="0" Grid.Column="6" 
                                       FontSize="13" FontWeight="SemiBold"
                                       VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Cơ quan ban hành:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtIssuer" Grid.Row="2" Grid.Column="2" 
                                       FontSize="13" TextWrapping="Wrap"
                                       VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="4" Text="Lĩnh vực:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtCategory" Grid.Row="2" Grid.Column="6" 
                                       FontSize="13" VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Trạng thái:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtWorkflowStatus" Grid.Row="4" Grid.Column="2" 
                                       FontSize="13" VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="4" Grid.Column="4" Text="Hiệu lực:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtStatus" Grid.Row="4" Grid.Column="6" 
                                       FontSize="13" FontWeight="SemiBold"
                                       VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="6" Grid.Column="0" Text="Người tạo:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtCreatedBy" Grid.Row="6" Grid.Column="2" 
                                       FontSize="13" VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="6" Grid.Column="4" Text="Ngày tạo:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Center"/>
                            <TextBlock x:Name="txtCreatedDate" Grid.Row="6" Grid.Column="6" 
                                       FontSize="13" VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Row="8" Grid.Column="0" Text="Tags:" 
                                       FontSize="12" Foreground="#757575" VerticalAlignment="Top"
                                       x:Name="lblTags"/>
                            <WrapPanel x:Name="tagPanel" Grid.Row="8" Grid.Column="2" 
                                       Grid.ColumnSpan="5"/>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Card 2: TRÍCH YẾU -->
                <Border x:Name="cardSubject" Background="White" CornerRadius="8" Margin="0,0,0,12"
                        BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                    <StackPanel>
                        <Border Background="#FFF3E0" CornerRadius="8,8,0,0" Padding="14,8">
                            <TextBlock Text="📌 TRÍCH YẾU" FontSize="12" FontWeight="Bold" 
                                       Foreground="#E65100"/>
                        </Border>
                        <TextBlock x:Name="txtSubject" Margin="14,10,14,14"
                                   FontSize="14" TextWrapping="Wrap" LineHeight="22"
                                   FontStyle="Italic" Foreground="#333333"/>
                    </StackPanel>
                </Border>
                
                <!-- Card 3: CĂN CỨ PHÁP LÝ -->
                <Border x:Name="cardBasedOn" Background="White" CornerRadius="8" Margin="0,0,0,12"
                        BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                    <StackPanel>
                        <Border Background="#E8EAF6" CornerRadius="8,8,0,0" Padding="14,8">
                            <TextBlock Text="⚖️ CĂN CỨ PHÁP LÝ" FontSize="12" FontWeight="Bold" 
                                       Foreground="#283593"/>
                        </Border>
                        <TextBlock x:Name="txtBasedOn" Margin="14,10,14,14"
                                   FontSize="13" TextWrapping="Wrap" LineHeight="22"
                                   FontFamily="Times New Roman"/>
                    </StackPanel>
                </Border>
                
                <!-- Card 4: NƠI NHẬN -->
                <Border x:Name="cardRecipients" Background="White" CornerRadius="8" Margin="0,0,0,12"
                        BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                    <StackPanel>
                        <Border Background="#E0F2F1" CornerRadius="8,8,0,0" Padding="14,8">
                            <TextBlock Text="📬 NƠI NHẬN" FontSize="12" FontWeight="Bold" 
                                       Foreground="#00695C"/>
                        </Border>
                        <TextBlock x:Name="txtRecipients" Margin="14,10,14,14"
                                   FontSize="13" TextWrapping="Wrap" LineHeight="20"
                                   FontFamily="Times New Roman"/>
                    </StackPanel>
                </Border>
                
                <!-- Card 5: NỘI DUNG -->
                <Border x:Name="cardContent" Background="White" CornerRadius="8" Margin="0,0,0,12"
                        BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                    <StackPanel>
                        <Border Background="#E8F5E9" CornerRadius="8,8,0,0" Padding="14,8">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="📄 NỘI DUNG" FontSize="12" FontWeight="Bold" 
                                           Foreground="#2E7D32" VerticalAlignment="Center"/>
                                <TextBlock x:Name="txtContentLength" FontSize="10" 
                                           Foreground="#9E9E9E" Margin="8,0,0,0"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        <TextBlock x:Name="txtContent" Margin="14,10,14,14"
                                   FontSize="13" TextWrapping="Wrap" LineHeight="22"
                                   FontFamily="Times New Roman"/>
                    </StackPanel>
                </Border>
                
                <!-- Card 6: AI TÓM TẮT -->
                <Border x:Name="cardSummary" Background="White" CornerRadius="8" Margin="0,0,0,12"
                        BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                    <StackPanel>
                        <Border Background="#F3E5F5" CornerRadius="8,8,0,0" Padding="14,8">
                            <TextBlock Text="🤖 TÓM TẮT AI" FontSize="12" FontWeight="Bold" 
                                       Foreground="#6A1B9A"/>
                        </Border>
                        <TextBlock x:Name="txtSummary" Margin="14,10,14,14"
                                   FontSize="13" TextWrapping="Wrap" LineHeight="22"
                                   FontStyle="Italic"/>
                    </StackPanel>
                </Border>
                
                <!-- Card 7: FILE ĐÍNH KÈM -->
                <Border x:Name="cardFile" Background="White" CornerRadius="8" Margin="0,0,0,4"
                        BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                    <StackPanel>
                        <Border Background="#FBE9E7" CornerRadius="8,8,0,0" Padding="14,8">
                            <TextBlock Text="📁 FILE ĐÍNH KÈM" FontSize="12" FontWeight="Bold" 
                                       Foreground="#BF360C"/>
                        </Border>
                        <StackPanel x:Name="filePanel" Margin="14,10,14,14"/>
                    </StackPanel>
                </Border>
                
            </StackPanel>
        </ScrollViewer>
        
        <!-- ===== FOOTER ACTION BAR ===== -->
        <Border Grid.Row="2" Background="White" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0"
                Padding="20,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="txtAuditInfo" Grid.Column="0"
                           FontSize="11" Foreground="#9E9E9E"
                           VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="btnOpenFile" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Click="OpenFile_Click"
                            Margin="0,0,8,0" Height="32" Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="FileDocumentOutline" Width="16" Height="16" 
                                                     Margin="0,0,6,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Mở file gốc" FontSize="12" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <Button x:Name="btnOpenFolder" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Click="OpenFolder_Click"
                            Margin="0,0,8,0" Height="32" Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="FolderOpen" Width="16" Height="16" 
                                                     Margin="0,0,6,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Mở thư mục" FontSize="12" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <Button Style="{StaticResource MaterialDesignRaisedButton}"
                            Click="Close_Click" Height="32"
                            Background="#1565C0">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Close" Width="16" Height="16" 
                                                     Margin="0,0,6,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Đóng" FontSize="12" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
