<Window x:Class="AIVanBan.Desktop.Views.ScanImportDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="ðŸ“¸ Nháº­p vÄƒn báº£n tá»« PDF/áº¢nh scan" 
        Height="750" Width="950"
        MinWidth="800" MinHeight="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip"
        Background="#F5F5F5">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- ===== HEADER ===== -->
        <Border Grid.Row="0" Background="#1565C0" Padding="20,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel>
                    <TextBlock Text="ðŸ“¸ NHáº¬P VÄ‚N Báº¢N Tá»ª PDF/áº¢NH SCAN" 
                               FontSize="16" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Sá»­ dá»¥ng AI Gemini Vision Ä‘á»ƒ Ä‘á»c vÃ  trÃ­ch xuáº¥t ná»™i dung tá»« vÄƒn báº£n scan" 
                               FontSize="12" Foreground="#B3FFFFFF" Margin="0,2,0,0"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <Border CornerRadius="12" Padding="8,4" Background="#BBDEFB">
                        <TextBlock Text="Gemini 2.5 Flash Vision" FontSize="11" 
                                   FontWeight="SemiBold" Foreground="#0D47A1"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ===== MAIN CONTENT - Two columns ===== -->
        <Grid Grid.Row="1" Margin="16,12,16,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="12"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- LEFT: File selection + Preview -->
            <Border Grid.Column="0" Background="White" CornerRadius="8" 
                    BorderBrush="#E0E0E0" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- File selection header -->
                    <Border Grid.Row="0" Background="#F5F5F5" CornerRadius="8,8,0,0" Padding="12,8">
                        <TextBlock Text="ðŸ“ FILE NGUá»’N" FontSize="12" FontWeight="Bold" Foreground="#424242"/>
                    </Border>
                    
                    <!-- Preview area -->
                    <Grid Grid.Row="1">
                        <!-- Empty state -->
                        <StackPanel x:Name="emptyState" VerticalAlignment="Center" HorizontalAlignment="Center">
                            <materialDesign:PackIcon Kind="FileImageOutline" Width="64" Height="64" 
                                                     Foreground="#BDBDBD" HorizontalAlignment="Center"/>
                            <TextBlock Text="ChÆ°a chá»n file" FontSize="13" Foreground="#9E9E9E"
                                       HorizontalAlignment="Center" Margin="0,8,0,4"/>
                            <TextBlock Text="Há»— trá»£: PDF, JPG, PNG, BMP, TIFF" FontSize="11" 
                                       Foreground="#BDBDBD" HorizontalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- Image preview -->
                        <ScrollViewer x:Name="previewScroll" Visibility="Collapsed"
                                      VerticalScrollBarVisibility="Auto"
                                      HorizontalScrollBarVisibility="Auto">
                            <Image x:Name="imgPreview" Stretch="Uniform" Margin="8"/>
                        </ScrollViewer>
                        
                        <!-- PDF preview (text info) -->
                        <Border x:Name="pdfPreview" Visibility="Collapsed"
                                Margin="12" VerticalAlignment="Center">
                            <StackPanel HorizontalAlignment="Center">
                                <materialDesign:PackIcon Kind="FilePdfBox" Width="64" Height="64" 
                                                         Foreground="#C62828" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="txtPdfFileName" FontSize="13" FontWeight="SemiBold"
                                           HorizontalAlignment="Center" Margin="0,8,0,2"
                                           TextTrimming="CharacterEllipsis" MaxWidth="280"/>
                                <TextBlock x:Name="txtPdfFileSize" FontSize="11" Foreground="#757575"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                    
                    <!-- File buttons -->
                    <StackPanel Grid.Row="2" Margin="12,8,12,12">
                        <Button x:Name="btnChooseFile" 
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Click="ChooseFile_Click" Height="36"
                                Background="#1565C0" Foreground="White">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="FolderOpen" Width="18" Height="18" 
                                                         Margin="0,0,8,0" VerticalAlignment="Center"/>
                                <TextBlock Text="Chá»n file PDF / áº¢nh scan" FontSize="13"/>
                            </StackPanel>
                        </Button>
                        
                        <Button x:Name="btnAnalyze" 
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Click="Analyze_Click" Height="40" Margin="0,8,0,0"
                                Background="#E65100" Foreground="White"
                                IsEnabled="False">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Robot" Width="20" Height="20" 
                                                         Margin="0,0,8,0" VerticalAlignment="Center"
                                                         x:Name="iconAnalyze"/>
                                <TextBlock x:Name="txtAnalyzeButton" Text="ðŸ¤– PhÃ¢n tÃ­ch báº±ng AI" 
                                           FontSize="14" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- RIGHT: Extracted data form -->
            <Border Grid.Column="2" Background="White" CornerRadius="8"
                    BorderBrush="#E0E0E0" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <Border Grid.Row="0" Background="#F5F5F5" CornerRadius="8,8,0,0" Padding="12,8">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“‹ THÃ”NG TIN TRÃCH XUáº¤T" FontSize="12" 
                                       FontWeight="Bold" Foreground="#424242"/>
                            <TextBlock x:Name="txtExtractionStatus" FontSize="11" 
                                       Foreground="#9E9E9E" Margin="8,0,0,0"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="0">
                        <StackPanel Margin="16,12,16,16">
                            
                            <!-- Loading overlay -->
                            <Border x:Name="loadingPanel" Visibility="Collapsed"
                                    Background="#F5F5F5" CornerRadius="8" Padding="20" Margin="0,0,0,12">
                                <StackPanel HorizontalAlignment="Center">
                                    <ProgressBar IsIndeterminate="True" Width="200" Margin="0,0,0,12"/>
                                    <TextBlock x:Name="txtLoadingStatus" Text="ðŸ¤– Äang phÃ¢n tÃ­ch báº±ng AI..."
                                               FontSize="13" HorizontalAlignment="Center"
                                               Foreground="#E65100" FontWeight="SemiBold"/>
                                    <TextBlock Text="QuÃ¡ trÃ¬nh cÃ³ thá»ƒ máº¥t 10-30 giÃ¢y tÃ¹y Ä‘á»™ dÃ i vÄƒn báº£n"
                                               FontSize="11" HorizontalAlignment="Center"
                                               Foreground="#9E9E9E" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Form fields -->
                            <StackPanel x:Name="formPanel">
                                
                                <!-- Row: Sá»‘ VB + Loáº¡i VB -->
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="12"/>
                                        <ColumnDefinition Width="160"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBox x:Name="txtSoVanBan" FontSize="13" FontWeight="SemiBold"
                                             materialDesign:HintAssist.Hint="Sá»‘ vÄƒn báº£n (VD: 15/GM-UBND)"
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    
                                    <ComboBox x:Name="cboLoaiVanBan" Grid.Column="2" FontSize="12"
                                              materialDesign:HintAssist.Hint="Loáº¡i vÄƒn báº£n"
                                              Style="{StaticResource MaterialDesignOutlinedComboBox}"/>
                                </Grid>
                                
                                <!-- Row: NgÃ y BH + CÆ¡ quan -->
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160"/>
                                        <ColumnDefinition Width="12"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <DatePicker x:Name="dpNgayBanHanh" FontSize="12"
                                                materialDesign:HintAssist.Hint="NgÃ y ban hÃ nh"
                                                Style="{StaticResource MaterialDesignOutlinedDatePicker}"/>
                                    
                                    <TextBox x:Name="txtCoQuanBanHanh" Grid.Column="2" FontSize="13"
                                             materialDesign:HintAssist.Hint="CÆ¡ quan ban hÃ nh"
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                </Grid>
                                
                                <!-- TrÃ­ch yáº¿u -->
                                <TextBox x:Name="txtTrichYeu" FontSize="13" Margin="0,0,0,10"
                                         materialDesign:HintAssist.Hint="TrÃ­ch yáº¿u"
                                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                         TextWrapping="Wrap" MinHeight="50" MaxHeight="80"
                                         AcceptsReturn="True"
                                         VerticalScrollBarVisibility="Auto"/>
                                
                                <!-- Row: NgÆ°á»i kÃ½ + HÆ°á»›ng VB + LÄ©nh vá»±c -->
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="12"/>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="12"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBox x:Name="txtNguoiKy" FontSize="12"
                                             materialDesign:HintAssist.Hint="NgÆ°á»i kÃ½"
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    
                                    <ComboBox x:Name="cboHuongVanBan" Grid.Column="2" FontSize="12"
                                              materialDesign:HintAssist.Hint="HÆ°á»›ng VB"
                                              Style="{StaticResource MaterialDesignOutlinedComboBox}"/>
                                    
                                    <TextBox x:Name="txtLinhVuc" Grid.Column="4" FontSize="12"
                                             materialDesign:HintAssist.Hint="LÄ©nh vá»±c"
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                </Grid>
                                
                                <!-- Row: Chá»©c danh kÃ½ + Tháº©m quyá»n kÃ½ + Äá»‹a danh -->
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="12"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="12"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBox x:Name="txtChucDanhKy" FontSize="12"
                                             materialDesign:HintAssist.Hint="Chá»©c danh kÃ½ (VD: CHá»¦ Tá»ŠCH)"
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    
                                    <TextBox x:Name="txtThamQuyenKy" Grid.Column="2" FontSize="12"
                                             materialDesign:HintAssist.Hint="Tháº©m quyá»n (TM., KT.)"
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    
                                    <TextBox x:Name="txtDiaDanh" Grid.Column="4" FontSize="12"
                                             materialDesign:HintAssist.Hint="Äá»‹a danh (VD: Gia Kiá»ƒm)"
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                </Grid>
                                
                                <!-- CÄƒn cá»© phÃ¡p lÃ½ -->
                                <TextBox x:Name="txtCanCu" FontSize="12" Margin="0,0,0,10"
                                         materialDesign:HintAssist.Hint="CÄƒn cá»© phÃ¡p lÃ½ (má»—i cÄƒn cá»© 1 dÃ²ng)"
                                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                         TextWrapping="Wrap" MinHeight="50" MaxHeight="100"
                                         AcceptsReturn="True"
                                         VerticalScrollBarVisibility="Auto"/>
                                
                                <!-- NÆ¡i nháº­n -->
                                <TextBox x:Name="txtNoiNhan" FontSize="12" Margin="0,0,0,10"
                                         materialDesign:HintAssist.Hint="NÆ¡i nháº­n (má»—i nÆ¡i 1 dÃ²ng)"
                                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                         TextWrapping="Wrap" MinHeight="40" MaxHeight="80"
                                         AcceptsReturn="True"
                                         VerticalScrollBarVisibility="Auto"/>
                                
                                <!-- Ná»™i dung -->
                                <TextBox x:Name="txtNoiDung" FontSize="12" Margin="0,0,0,4"
                                         materialDesign:HintAssist.Hint="Ná»™i dung vÄƒn báº£n (Ä‘áº§y Ä‘á»§)"
                                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                         TextWrapping="Wrap" MinHeight="120" MaxHeight="300"
                                         AcceptsReturn="True"
                                         VerticalScrollBarVisibility="Auto"
                                         FontFamily="Times New Roman"/>
                                
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>
        
        <!-- ===== FOOTER ===== -->
        <Border Grid.Row="2" Background="White" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0"
                Padding="20,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="txtFooterInfo" FontSize="11" Foreground="#9E9E9E" 
                           VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Style="{StaticResource MaterialDesignOutlinedButton}"
                            Click="Cancel_Click" Height="34" Margin="0,0,10,0">
                        <TextBlock Text="Há»§y" FontSize="13"/>
                    </Button>
                    
                    <Button x:Name="btnSave"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Click="Save_Click" Height="36"
                            Background="#2E7D32" Foreground="White"
                            IsEnabled="False">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ContentSave" Width="18" Height="18" 
                                                     Margin="0,0,6,0" VerticalAlignment="Center"/>
                            <TextBlock Text="LÆ°u vÄƒn báº£n vÃ o há»‡ thá»‘ng" FontSize="13" FontWeight="SemiBold"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
